{"version":3,"sources":["webpack:///src/consumablesManage/views/consumablesManage/createOutOrderByCheck.vue","webpack:///./src/consumablesManage/views/consumablesManage/createOutOrderByCheck.vue","webpack:///./src/consumablesManage/views/consumablesManage/createOutOrderByCheck.vue?d327"],"names":["createOutOrderByCheck","components","AddGoods","data","_this","this","warehouseArr","typeArr","departmentArr","provideModal","provideForm","date","Date","toLocaleDateString","warehouse","$route","params","warehouseId","split","warehouseName","type","department","leader","applyDepartArr","goodsCols","title","align","width","key","render","h","class","on","click","e","stopPropagation","showInventoryModal","index","row","currentInventory","slot","renderHeader","formGoodsData","attrData","provideRemarkForm","remark","ruleValidate","required","message","trigger","saveLoading","leaderArr","loading","userName","addGoodsIndex","addGoodsId","addGoodsModal","delId","delIndex","code","editId","editOrderNO","goodsName","outNumber","inventoryModal","inventoryCols","inventoryData","tmpInventory","subInvArr","computed","created","_this2","getChargedStoreRoom","then","response","getOutKindList","getInventoryGoodsInfo","getDepartment","getFullYear","fillZero","getMonth","getDate","$store","dispatch","res","methods","id","_this3","BaseAxios","method","url","statuses","goodsInfoName","aData","list","length","map","item","push","goodsInfoId","name","classify","goodsKindName","brand","model","size","unit","number","inventory","amount","catch","error","postErrorTip","console","log","changeDate","val","toOut","$router","path","handleSummary","_ref","columns","sums","forEach","column","values","Number","every","value","isNaN","v","reduce","prev","curr","remoteMethod","_this4","selectLeader","addGoodsHandle","addGood","addGoodId","$refs","child","getKind","selectedArr","slice","selectedArrId","postWarningTip","saveGoodsHandle","getInventoryByParam","join","getCurrIndex","_this5","flag","invArr","i","arr","outNum","tmpInvAmount","getGoodsList","tmpCount","tmpNumber","parseFloat","unitPrice","getGoodsByCodeHandle","getGoodsByCode","_this6","ids","getGoodsInfoByUseType","indexOf","goodsKind","price","priceList","goodsInfoIds","_this7","_loop","$set","getGoodsListInWarehouse","_this8","totalOutNumber","recordGoodsId","recordKind","orderNO","num","surplusNum","_this9","promise_default","a","resolve","reject","recordId","err","_this10","isRequest","aArr","splice","JSON","parse","stringify_default","handleInventorySummary","_ref2","cancelInventoryModal","resetFields","confirmInventoryModal","_this11","selArr","totalOutNum","calcAmount","saveOrUpdateIntoWarehouseRecord","buyer","note","goodsArr","_this12","flag1","flag2","tmpItem","setTimeout","handleSubmit","validate","valid","clickRowHandle","window","event","rowClassName","delRowHandle","mounted","__vue_styles__","context","__webpack_require__","Component","Object","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","rules","label-width","inline","label","prop","editable","format","placeholder","callback","$$v","expression","_v","_l","_s","filterable","remote","remote-method","option","maxlength","nativeOn","keyup","$event","_k","keyCode","border","show-summary","summary-method","row-class-name","on-row-click","scopedSlots","_u","fn","max","min","precision","on-change","readonly","staticStyle","autosize","minRows","maxRows","trim","mask-closable","on-cancel","undefined","__webpack_exports__"],"mappings":"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","file":"static/js/34.88e5cf4e34abd5788488.js","sourcesContent":["<template>\n  <div class=\"zd-common-component\">\n    <Form class=\"zd-cm-applyForm\" ref=\"provideForm\" :model=\"provideForm\" :rules=\"ruleValidate\" :label-width=\"80\" inline>\n      <!--<FormItem label=\"出库单号：\" prop=\"outOrder\">\n        <Input v-model.trim=\"provideForm.outOrder\" placeholder=\"出库单号\" class=\"zd-common-w200\" :maxlength=\"30\"></Input>\n      </FormItem>-->\n      <FormItem label=\"出库日期：\" prop=\"date\">\n        <DatePicker v-model=\"provideForm.date\" :editable=\"false\" type=\"date\" format=\"yyyy-MM-dd\" placeholder=\"出库日期\" class=\"zd-common-input-h38 zd-common-w150 zd-common-mr10\"></DatePicker>\n      </FormItem>\n      <FormItem label=\"出库仓库：\">\n        <!--<Input class=\"zd-common-input-h38 zd-common-w150 zd-common-mr10\" v-model.trim=\"provideForm.warehouseName\" readonly></Input>-->\n        <Select v-model=\"provideForm.warehouse\" placeholder=\"选择出库仓库\" class=\"zd-common-w150 zd-common-mr10\">\n          <Option v-for=\"item in warehouseArr\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n        </Select>\n      </FormItem>\n      <FormItem label=\"出库类型：\" prop=\"type\">\n        <Select v-model=\"provideForm.type\" placeholder=\"选择出库类型\" class=\"zd-common-input-h38 zd-common-w150 zd-common-mr10\">\n          <Option v-for=\"item in typeArr\" :value=\"item.code\" :key=\"item.code\">{{ item.name }}</Option>\n        </Select>\n      </FormItem>\n      <FormItem label=\"部门：\" prop=\"department\" :label-width=\"40\">\n        <Select v-model=\"provideForm.department\" placeholder=\"选择领用部门\" class=\"zd-common-input-h38 zd-common-w200 zd-common-mr10\">\n          <Option :value=\"item.id\" v-for=\"item in departmentArr\" :key=\"item.id\">{{ item.name }}</Option>\n        </Select>\n      </FormItem>\n      <FormItem label=\"领用人：\" prop=\"leader\" :label-width=\"50\">\n        <Select\n          ref=\"leader\"\n          class=\"zd-common-input-h38 zd-common-w150 zd-common-fl\"\n          placeholder=\"请输入领用人\"\n          v-model=\"provideForm.leader\"\n          filterable\n          remote\n          :remote-method=\"remoteMethod\"\n          :loading=\"loading\">\n          <Option v-for=\"option in leaderArr\" :value=\"option.id\" :key=\"option.id\">{{option.name}}</Option>\n        </Select>\n      </FormItem>\n    </Form>\n    <div class=\"zd-common-black-b zd-common-pt5 zd-common-pb5 zd-common-pl20\">\n      <Button type=\"default\" class=\"zd-common-mr10 zd-common-h32 zd-common-lh8\" @click=\"addGoodsHandle\">\n        添加\n      </Button>\n      <Button type=\"default\" class=\"zd-common-mr10 zd-common-h32 zd-common-lh8\" @click=\"delRowHandle\">\n        删除\n      </Button>\n      <Input v-model=\"code\" placeholder=\"请输入物品编码，按Enter添加\" :maxlength=\"50\" class=\"zd-cm-w220 zd-common-input-h32\"\n             @keyup.enter.native=\"getGoodsByCodeHandle\"/>\n    </div>\n    <Form ref=\"formGoodsData\" :model=\"formGoodsData\" class=\"zd-common-mt10\">\n      <Table class=\"zd-common-overflow-v\" border :columns=\"goodsCols\" :data=\"formGoodsData.attrData\" show-summary :summary-method=\"handleSummary\" :row-class-name=\"rowClassName\" @on-row-click=\"clickRowHandle\">\n        <template slot-scope=\"{ row,index }\" slot=\"number\">\n          <Form-item class=\"zd-common-mt24\" :prop=\"'attrData.' + index + '.number'\"\n                     :rules=\"{required: true, message:'不能为空', trigger:'blur',type:'number'}\" v-if=\"formGoodsData.attrData[index].currentInventory>0\">\n            <InputNumber :max=\"formGoodsData.attrData[index].currentInventory\" :min=\"1\" :precision='0' placeholder=\"数量\" v-model=\"formGoodsData.attrData[index].number\" @on-change=\"getCurrIndex(index)\"/>\n          </Form-item>\n          <Form-item class=\"zd-common-mt24\" :prop=\"'attrData.' + index + '.number'\"\n                     :rules=\"{required: true, message:'不能为空', trigger:'blur',type:'number'}\" v-else>\n            <InputNumber v-model=\"formGoodsData.attrData[index].number\" readonly/>\n          </Form-item>\n        </template>\n        <template slot-scope=\"{ row,index }\" slot=\"amount\">\n          <!--<Form-item class=\"zd-common-mt24\" :prop=\"'attrData.' + index + '.amount'\"\n                     :rules=\"{required: true, message:'不能为空', trigger:'blur', type:'number'}\">\n            <InputNumber :max=\"100\" :min=\"1\" :precision='2' placeholder=\"金额\" v-model=\"formGoodsData.attrData[index].amount\"/>\n          </Form-item>-->\n          {{ formGoodsData.attrData[index].amount }}\n        </template>\n      </Table>\n    </Form>\n    <div class=\"zd-common-mt10 zd-common-clearFix\">\n      <span class=\"zd-common-fl\">制单人：{{ userName }}</span>\n      <span class=\"zd-common-fl zd-common-ml20\">制单日期：{{ date }}</span>\n    </div>\n    <Form class=\"zd-common-mt20\" ref=\"provideRemarkForm\" :model=\"provideRemarkForm\">\n      <FormItem label=\"备注：\" class=\"zd-common-mb0\">\n        <Input style=\"width: 826px;\" class=\"zd-common-fl\" v-model.trim=\"provideRemarkForm.remark\" placeholder=\"备注\" :maxlength=\"100\" type=\"textarea\" :autosize=\"{minRows: 5,maxRows: 5}\"></Input>\n      </FormItem>\n    </Form>\n    <div slot=\"footer\" class=\"zd-common-modal-footer zd-common-pt30\">\n      <Button type=\"primary\" class=\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\" @click=\"handleSubmit\"\n              :loading=\"saveLoading\">\n        <span v-if=\"!saveLoading\">确定</span>\n        <span v-else>正在保存...</span>\n      </Button>\n      <Button @click=\"toOut\" class=\"zd-common-w100 zd-common-h32 zd-common-lh8\">取消</Button>\n    </div>\n\n    <!--添加物品-->\n    <Modal v-model=\"addGoodsModal\" :mask-closable=\"false\" :width=\"1200\" >\n      <h3 slot=\"header\" class=\"zd-common-modal-header\">\n        <span>物品档案</span>\n      </h3>\n      <add-goods ref=\"child\"></add-goods>\n      <div slot=\"footer\" class=\"zd-common-modal-footer zd-common-pt10\">\n        <div slot=\"footer\" class=\"zd-common-modal-footer zd-common-pt10\">\n          <Button type=\"primary\" class=\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\" @click=\"saveGoodsHandle\">确定</Button>\n          <Button @click=\"addGoodsModal = false\" class=\"zd-common-w100 zd-common-h32 zd-common-lh8\">取消</Button>\n        </div>\n      </div>\n    </Modal>\n    <!--库存-->\n    <Modal v-model=\"inventoryModal\" :mask-closable=\"false\" :width=\"920\" @on-cancel=\"cancelInventoryModal\">\n      <h3 slot=\"header\" class=\"zd-common-modal-header\">\n        <span>{{ goodsName }}</span>\n      </h3>\n      <div class=\"zd-common-tr\">\n        <i class=\"zd-common-fs12 zd-common-font-style zd-common-des-font-c\">系统默认按照先入先出的原则自动分配出库数量</i>\n      </div>\n      <div class=\"zd-common-h400 zd-common-mt10\">\n        <vue-scroll>\n          <Form ref=\"inventoryData\" :model=\"inventoryData\">\n            <Table class=\"zd-common-overflow-v zd-cm-out-table\" border :columns=\"inventoryCols\" :data=\"inventoryData.attrData\" show-summary :summary-method=\"handleInventorySummary\">\n              <template slot-scope=\"{ row,index }\" slot=\"outNum\" v-if=\"inventoryData.attrData[index].surplusNum>0\">\n                <Form-item class=\"zd-common-mt24\">\n                  <InputNumber :max=\"inventoryData.attrData[index].surplusNum\" :min=\"1\" :precision='0' placeholder=\"数量\" v-model=\"inventoryData.attrData[index].outNum\" @on-change=\"calcAmount(index)\"/>\n                </Form-item>\n              </template>\n              <template slot-scope=\"{ row,index }\" slot=\"outNum\" v-else>\n                <Form-item class=\"zd-common-mt24\">\n                  <InputNumber v-model=\"inventoryData.attrData[index].outNum\" readonly/>\n                </Form-item>\n              </template>\n              <template slot-scope=\"{ row,index }\" slot=\"amount\">\n                {{ inventoryData.attrData[index].amount }}\n              </template>\n            </Table>\n          </Form>\n        </vue-scroll>\n      </div>\n      <div slot=\"footer\" class=\"zd-common-modal-footer zd-common-pt10\">\n        <Button type=\"primary\" class=\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\" @click=\"confirmInventoryModal\">确定</Button>\n        <Button @click=\"cancelInventoryModal\" class=\"zd-common-w100 zd-common-h32 zd-common-lh8\">取消</Button>\n      </div>\n    </Modal>\n\n  </div>\n</template>\n<script>\n  import AddGoods from \"../../components/addGoods\"\n  export default {\n    components:{\n      AddGoods\n    },\n    data() {\n      return {\n        //添加出库单\n        warehouseArr:[],\n        typeArr:[],\n        departmentArr:[],\n        provideModal:false,\n        provideForm:{\n          date:new Date().toLocaleDateString(),\n          warehouse:this.$route.params.warehouseId.split('_')[1],\n          warehouseName:'',\n          type:'pk',\n          department:'',\n          leader:''\n        },\n        applyDepartArr:[],\n        goodsCols:[\n          {\n            type: 'index',\n            title:'序号',\n            align: 'center',\n            width:65,\n            key:'sortNum'\n          },\n          {\n            title: '物品名称',\n            align: 'center',\n            key: 'name',\n          },\n          {\n            title: '物品编码',\n            align: 'center',\n            key: 'code',\n          },\n          {\n            title: '物品分类',\n            align: 'center',\n            key: 'classify',\n          },\n          {\n            title: '品牌',\n            align: 'center',\n            key: 'brand',\n          },\n          {\n            title: '规格/型号',\n            align: 'center',\n            key: 'model',\n          },\n          {\n            title: '单位',\n            align: 'center',\n            key: 'unit',\n          },\n          {\n            title: '当前库存',\n            align: 'center',\n            key: 'currentInventory',\n            render:(h,params)=>{\n              return h('div',[\n                h('span', {\n                  class:'zd-common-primary-c zd-common-cp',\n                  on:{\n                    click:(e)=>{\n                      e.stopPropagation();\n                      this.showInventoryModal(params.index);\n                    }\n                  }\n                },params.row.currentInventory),\n              ])\n            }\n          },\n          {\n            title: '出库数量',\n            align: 'center',\n            slot: 'number',\n            key: 'number',\n            renderHeader:(h,params)=>{\n              return h('div',[\n                h('span', {\n                  class:'zd-cm-required'\n                },'出库数量'),\n              ])\n            }\n          },\n          /*{\n            title: '价格',\n            align: 'center',\n            slot: 'price',\n            key: 'price',\n            renderHeader:(h,params)=>{\n              return h('div',[\n                h('span', {\n                  class:'zd-cm-required'\n                },'价格'),\n              ])\n            }\n          },*/\n          /*{\n            title: '购买人',\n            align: 'center',\n            slot: 'purchaser',\n          },*/\n          {\n            title: '金额',\n            align: 'center',\n            slot: 'amount',\n            key: 'amount',\n          }\n        ],\n        formGoodsData:{\n          attrData:[]\n        },\n        provideRemarkForm:{\n          remark:''\n        },\n        ruleValidate: {\n          date: [\n            { required: true, type:'date', message:'不能为空', trigger: 'change' }\n          ],\n          warehouse: [\n            { required: true, message:'不能为空', trigger: 'change' }\n          ],\n          type: [\n            { required: true, message:'不能为空', trigger: 'change' }\n          ],\n        },\n        saveLoading:false,\n        leaderArr:[],\n        loading:false,\n        date:'',\n        userName:'',\n        addGoodsIndex:null,\n        addGoodsId:null,\n        //添加物品\n        addGoodsModal:false,\n        delId:'',\n        delIndex:'',\n        //通过code添加\n        code:'',\n        //修改\n        editId:'',\n        editOrderNO:'',\n        //库存\n        goodsName:'',\n        outNumber:null,\n        inventoryModal:false,\n        inventoryCols:[\n          {\n            type: 'index',\n            title:'序号',\n            align: 'center',\n            width:65,\n            key:'sortNum'\n          },\n          {\n            title: '入库日期',\n            align: 'center',\n            key: 'date',\n            width:110\n          },\n          {\n            title: '入库单号',\n            align: 'center',\n            key: 'orderNO',\n            width:140\n          },\n          {\n            title: '入库价格',\n            align: 'center',\n            key: 'price',\n            width:100\n          },\n          {\n            title: '剩余数量',\n            align: 'center',\n            key: 'surplusNum',\n            width:100\n          },\n          {\n            title: '本次出库数量',\n            align: 'center',\n            slot: 'outNum',\n            key: 'outNum',\n          },\n          {\n            title: '金额',\n            align: 'center',\n            slot: 'amount',\n            key: 'amount',\n          }\n        ],\n        inventoryData:{\n          attrData:[]\n        },\n        tmpInventory:[],\n        subInvArr:[],\n      }\n    },\n    computed:{\n\n    },\n    created(){\n      this.getChargedStoreRoom().then((response)=>{\n        this.warehouseArr = response.data;\n      });\n      this.getOutKindList().then((response)=>{\n        this.typeArr = response.data;\n        this.getInventoryGoodsInfo(this.$route.params.warehouseId.split('_')[0]);\n      });\n      this.getDepartment().then((response)=>{\n        this.departmentArr = response.data;\n      });\n      const e = new Date();\n      this.date = e.getFullYear() +\"-\"+ this.fillZero(e.getMonth()+1) +\"-\"+ this.fillZero(e.getDate());\n      this.$store.dispatch('getBaseInfo').then((res) => {\n        this.userName = res.userName;\n      });\n\n    },\n    methods: {\n      //获取盘点单详情\n      getInventoryGoodsInfo(id) {\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!getInventoryGoodsInfo.action',\n          data:{\n            id:id,\n            statuses:'2',\n            goodsInfoName:''\n          },\n        })\n          .then((response) => {\n            const aData = response.data;\n            if(aData.list.length>0){\n              aData.list.map((item)=>{\n                this.formGoodsData.attrData.push(\n                  {\n                    id:item.goodsInfoId,\n                    name:item.name,\n                    code:item.code,\n                    classify:item.goodsKindName,\n                    brand:item.brand,\n                    model:item.size,\n                    unit:item.unit,\n                    number:null,\n                    currentInventory:item.inventory,\n                    amount:null,\n                  }\n                )\n              });\n            }\n          })\n          .catch((error) => {\n            this.postErrorTip('请求失败');\n            console.log(error);\n          });\n      },\n\n      //日期\n      changeDate(val){\n        this.provideForm.date = val;\n      },\n\n      //回到出库单列表\n      toOut(){\n        this.$router.push({path:'/out'});\n      },\n\n      //合计\n      handleSummary ({ columns, data }) {\n        const sums = {};\n        columns.forEach((column, index) => {\n          const key = column.key;\n          if (index === 0) {\n            sums[key] = {\n              key,\n              value: '合计'\n            };\n            return;\n          }\n          const values = data.map(item => Number(item[key]));\n          if (!values.every(value => isNaN(value)) && (index===8 || index===9)) {\n            const v = values.reduce((prev, curr) => {\n              const value = Number(curr);\n              if (!isNaN(value)) {\n                return prev + curr;\n              } else {\n                return prev;\n              }\n            }, 0);\n            sums[key] = {\n              key,\n              value: v\n            };\n          } else {\n            sums[key] = {\n              key,\n              value: ''\n            };\n          }\n        });\n        return sums;\n      },\n\n      //选择领用人\n      remoteMethod(name){\n        this.selectLeader(name).then((res)=>{\n          this.leaderArr = res.data;\n        })\n      },\n\n      //添加物品\n      addGoodsHandle(){\n        if(this.provideForm.warehouse === \"\"){\n          this.postWarningTip('请先选择出库仓库');\n          return\n        }\n        this.addGoodsModal=true;\n        let addGood = this.formGoodsData.attrData;\n        let addGoodId = [];\n        addGood.map((item)=>{\n          addGoodId.push(item.id);\n        });\n        this.$refs.child.getKind('1');\n        this.$refs.child.selectedArr = addGood.slice();\n        this.$refs.child.selectedArrId = addGoodId;\n      },\n      saveGoodsHandle(){\n        this.addGoodsModal = false;\n        this.formGoodsData.attrData = this.$refs.child.selectedArr.slice();\n        this.getInventoryByParam(this.$refs.child.selectedArrId.join(','),this.provideForm.warehouse);\n      },\n      getCurrIndex(index){\n        let flag = false;\n        let invArr = [];\n        this.tmpInventory.map((item)=>{\n          if(item.id === this.formGoodsData.attrData[index].id){\n            for (let i = 0; i < item.arr.length; i++) {\n              if(item.arr[i].outNum!==null){\n                invArr = item.arr;\n                flag = true;\n                break\n              }\n            }\n          }\n        });\n        if(flag){\n          let tmpInvAmount = null;\n          invArr.map((item)=>{\n            if(item.outNum!==null){\n              tmpInvAmount += item.amount\n            }\n          });\n\n          this.formGoodsData.attrData[index].amount = tmpInvAmount;\n        }else{\n          this.getGoodsList(this.formGoodsData.attrData[index].id,this.provideForm.warehouse).then((response)=>{\n            let aData = response.data;\n            let tmpCount = null;\n            let tmpNumber = this.formGoodsData.attrData[index].number;\n            if(tmpNumber!==null){\n              for (let i = 0; i < aData.length; i++) {\n                if(aData[i].inventory >= tmpNumber){\n                  tmpCount += parseFloat(aData[i].unitPrice)*tmpNumber;\n                  break\n                }else{\n                  tmpNumber -= aData[i].inventory;\n                  tmpCount += parseFloat(aData[i].unitPrice)*aData[i].inventory;\n                }\n              }\n              this.formGoodsData.attrData[index].amount = tmpCount;\n            }else{\n              this.formGoodsData.attrData[index].amount = null;\n            }\n          })\n        }\n      },\n\n      //通过code添加物品\n      getGoodsByCodeHandle(){\n        if(this.code === \"\"){\n          this.postWarningTip('请输入物品编码进行添加');\n          return\n        }\n        this.getGoodsByCode(this.code);\n      },\n      getGoodsByCode(code){\n        const ids = this.formGoodsData.attrData.map((item)=>{\n          return item.id;\n        })\n        this.getGoodsInfoByUseType('1','','',code).then((res)=>{\n          let aData = res.data;\n          aData.map((item)=>{\n            if(ids.indexOf(item.id)<0){\n              this.formGoodsData.attrData.push(\n                {\n                  id:item.id,\n                  name:item.name,\n                  code:item.code,\n                  classify:item.goodsKind,\n                  brand:item.brand,\n                  model:item.size,\n                  unit:item.unit,\n                  number:null,\n                  currentInventory:null,\n                  price:null,\n                  amount:null,\n                  priceList:[]\n                }\n              )\n              this.getInventoryByParam(item.id,this.provideForm.warehouse);\n            }\n          })\n          this.code = \"\";\n\n        });\n      },\n\n      //根据物品仓库获取库存\n      getInventoryByParam(goodsInfoIds,warehouseId) {\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!getInventoryByParam.action',\n          data:{\n            goodsInfoIds:goodsInfoIds,\n            warehouseId:warehouseId\n          },\n        })\n          .then((response) => {\n            let aData = response.data;\n            for (let key in aData){\n              this.formGoodsData.attrData.map((item)=>{\n                if(item.id === key){\n                  this.$set(item,'currentInventory',aData[key].inventory);\n                }\n              })\n            }\n          })\n          .catch((error) => {\n            this.postErrorTip('请求失败');\n            console.log(error);\n          });\n      },\n\n      //根据物品id获取库存列表\n      getGoodsListInWarehouse(goodsInfoId,warehouseId) {\n        this.getGoodsList(goodsInfoId,warehouseId).then((response)=>{\n          this.inventoryData.attrData = [];\n          let aData = response.data;\n          if(this.outNumber !== null){\n            let totalOutNumber = this.outNumber;\n            for (let i = 0; i < aData.length; i++) {\n              let outNum = null;\n              let item = aData[i];\n              if(item.inventory>=totalOutNumber){\n                outNum = totalOutNumber;\n                totalOutNumber = 0;\n              }else{\n                outNum = item.inventory;\n                totalOutNumber -= item.inventory;\n              }\n              this.inventoryData.attrData.push({\n                id:item.recordGoodsId,\n                recordKind:item.recordKind,\n                date:item.date,\n                orderNO:item.num,\n                price:item.unitPrice,\n                surplusNum:item.inventory,\n                outNum:outNum === 0 ? null : outNum,\n                amount:(outNum !== 0 && outNum !== null) ? (item.unitPrice*outNum) : null\n              })\n            }\n          }else{\n            aData.map((item)=>{\n              this.inventoryData.attrData.push(\n                {\n                  id:item.recordGoodsId,\n                  recordKind:item.recordKind,\n                  date:item.date,\n                  orderNO:item.num,\n                  price:item.unitPrice,\n                  surplusNum:item.inventory,\n                  outNum:item.outNum === 0 ? null : item.outNum,\n                  amount:null\n                }\n              )\n            })\n          }\n        })\n      },\n      getGoodsList(goodsInfoId,warehouseId) {\n        return new Promise((resolve, reject) => {\n          BaseAxios({\n            method:'post',\n            url:'/sr/storeroomData!getOutWarehouseRecordDetail.action',\n            data:{\n              goodsInfoId:goodsInfoId,\n              warehouseId:warehouseId,\n              recordId:this.editId\n            }\n          })\n            .then((response) => {\n              resolve(response)\n            })\n        }).catch(err => {\n          reject(err)\n        })\n      },\n\n      //显示库存\n      showInventoryModal(index){\n        let isRequest = false;\n        let aArr = [];\n        this.addGoodsIndex = index;\n        this.inventoryModal = true;\n        this.addGoodsId = this.formGoodsData.attrData[index].id;\n        this.goodsName = this.formGoodsData.attrData[index].name;\n        this.outNumber = this.formGoodsData.attrData[index].number;\n\n        if(this.outNumber === null){\n          this.tmpInventory.map((item,index)=>{\n            if(item.id === this.addGoodsId){\n              this.tmpInventory.splice(index,1);\n            }\n          })\n        }else{\n          let item = JSON.parse(JSON.stringify(this.tmpInventory));\n          for (let i = 0; i < item.length; i++) {\n            if(item[i].id === this.addGoodsId){\n              isRequest = true;\n              aArr = item[i].arr;\n              break;\n            }\n          }\n        }\n        if(isRequest){\n          this.inventoryData.attrData = aArr;\n        }else{\n          this.getGoodsListInWarehouse(this.formGoodsData.attrData[index].id,this.provideForm.warehouse);\n        }\n\n      },\n\n      //显示库存列表合计\n      handleInventorySummary({ columns, data }) {\n        const sums = {};\n        columns.forEach((column, index) => {\n          const key = column.key;\n          if (index === 0) {\n            sums[key] = {\n              key,\n              value: '合计'\n            };\n            return;\n          }\n\n          const values = data.map(item => Number(item[key]));\n          if (!values.every((value) => isNaN(value)) && (index===4 || index===5 || index===6)) {\n            const v = values.reduce((prev, curr) => {\n              const value = Number(curr);\n              if (!isNaN(value)) {\n                return prev + curr;\n              } else {\n                return prev;\n              }\n            }, 0);\n            sums[key] = {\n              key,\n              value: v\n            };\n          } else {\n            sums[key] = {\n              key,\n              value: ''\n            };\n          }\n        });\n        return sums;\n      },\n\n      //隐藏库存列表\n      cancelInventoryModal(){\n        this.inventoryModal = false;\n        this.$refs['inventoryData'].resetFields();\n      },\n\n      //重新选择库存数量\n      confirmInventoryModal(){\n        let selArr = this.inventoryData.attrData;\n        let flag = false;\n        for (let i = 0; i < selArr.length; i++) {\n          if(selArr[i].outNum !== null){\n            flag = true;\n            break;\n          }\n        }\n        if(flag){\n          this.tmpInventory.map((item,index)=>{\n             if (item.id === this.addGoodsId){\n               this.tmpInventory.splice(index,1);\n             }\n          });\n          this.tmpInventory.push({'id':this.addGoodsId,'arr':selArr});\n          let totalOutNum = null;\n          selArr.map((item)=>{\n            totalOutNum += item.outNum;\n          });\n          this.formGoodsData.attrData[this.addGoodsIndex].number = totalOutNum;\n          //this.$refs['formGoodsData'].validate();\n        }else{\n          this.formGoodsData.attrData[this.addGoodsIndex].number = null;\n          this.tmpInventory.map((item,index)=>{\n            if(item.id === this.addGoodsId){\n              this.tmpInventory.splice(index,1);\n            }\n          })\n        }\n        this.getCurrIndex(this.addGoodsIndex);\n        this.inventoryModal = false;\n      },\n\n      //计算库存总金额\n      calcAmount(index){\n        this.inventoryData.attrData[index].amount = this.inventoryData.attrData[index].price*this.inventoryData.attrData[index].outNum;\n      },\n\n      //保存\n      saveOrUpdateIntoWarehouseRecord(date,warehouse,type,department,buyer,note,goodsArr,code,id) {\n        let flag1 = true,flag2=true;\n        let params = {};\n        this.subInvArr = [];\n        params['warehouseRecord.date'] = date;\n        params['warehouseRecord.warehouse.id'] = warehouse;\n        params['warehouseRecord.outKind'] = type;\n        if(department!==\"\"){\n          params['warehouseRecord.department.id'] = department;\n        }\n        if(buyer!==\"\"){\n          params['warehouseRecord.buyer.id'] = buyer;\n        }\n        params['warehouseRecord.note'] = note;\n        params['warehouseRecord.code'] = code;\n        params['warehouseRecord.id'] = id;\n\n        if(this.tmpInventory.length>0){\n          flag1 = false;\n          this.tmpInventory.map((tmpItem)=>{\n            goodsArr.map((item,index)=> {\n              if (item.id === tmpItem.id) {\n                tmpItem.arr.map((child) => {\n                  if(child.outNum !== null) {\n                    this.subInvArr.push({\n                      id: child.id,\n                      recordKind: child.recordKind,\n                      outNum: child.outNum\n                    });\n                  }\n                })\n              }else{\n                this.getGoodsList(item.id,this.provideForm.warehouse).then((response)=>{\n                  let aData = response.data;\n                  if(item.number !== null){\n                    let totalOutNumber = item.number;\n                    aData.map((item)=>{\n                      let outNum = null;\n                      if(item.inventory>=totalOutNumber){\n                        outNum = totalOutNumber;\n                        totalOutNumber = 0;\n                      }else{\n                        outNum = item.inventory;\n                        totalOutNumber -= item.inventory;\n                      }\n                      this.subInvArr.push({\n                        id:item.recordGoodsId,\n                        recordKind:item.recordKind,\n                        outNum:outNum === 0 ? null : outNum\n                      })\n                    })\n                  }\n                  this.subInvArr.map((item,i)=>{\n                    if(item.outNum!==null){\n                      params['outGoodsVOs['+i+'].recordGoodsId'] = item.id;\n                      params['outGoodsVOs['+i+'].count'] = item.outNum;\n                      params['outGoodsVOs['+i+'].recordKind'] = item.recordKind;\n                    }\n                  });\n\n                })\n              }\n              if(index === (goodsArr.length -1)){\n                  flag1 = true;\n              }\n            })\n          })\n        }else{\n          flag2 = false;\n          goodsArr.map((item,index)=>{\n            this.getGoodsList(item.id,this.provideForm.warehouse).then((response)=>{\n              let aData = response.data;\n              if(item.number !== null){\n                let totalOutNumber = item.number;\n                aData.map((item)=>{\n                  let outNum = null;\n                  if(item.inventory>=totalOutNumber){\n                    outNum = totalOutNumber;\n                    totalOutNumber = 0;\n                  }else{\n                    outNum = item.inventory;\n                    totalOutNumber -= item.inventory;\n                  }\n                  this.subInvArr.push({\n                    id:item.recordGoodsId,\n                    recordKind:item.recordKind,\n                    outNum:outNum === 0 ? null : outNum\n                  })\n                })\n              }\n              this.subInvArr.map((item,i)=>{\n                if(item.outNum!==null){\n                  params['outGoodsVOs['+i+'].recordGoodsId'] = item.id;\n                  params['outGoodsVOs['+i+'].count'] = item.outNum;\n                  params['outGoodsVOs['+i+'].recordKind'] = item.recordKind;\n                }\n              });\n            })\n            if(index === (goodsArr.length -1)){\n              flag2 = true;\n            }\n          });\n        }\n        if(flag1 && flag2){\n          setTimeout(()=>{\n            BaseAxios({\n              method: 'post',\n              url: '/sr/storeroomData!saveOrUpdateOutWarehouseRecord.action',\n              data:params,\n            })\n              .then((response) => {\n                this.saveLoading = false;\n                this.toOut();\n              })\n              .catch((error) => {\n                this.saveLoading = false;\n                this.postErrorTip('请求失败');\n                console.log(error);\n              });\n          },500)\n        }\n\n      },\n\n      //保存验证\n      handleSubmit(){\n        let flag = false,flag2 = false;\n        this.$refs['provideForm'].validate((valid) => {\n          if (valid) {\n            flag = true;\n          }\n        });\n        if(this.formGoodsData.attrData.length<=0){\n          this.postWarningTip('请添加物品');\n        }else{\n          this.$refs['formGoodsData'].validate((valid) => {\n            if(valid){\n              flag2 = true;\n            }\n          });\n          if(flag && flag2){\n            this.saveLoading = true;\n            const e = new Date(this.provideForm.date);\n            const date = e.getFullYear() +\"-\"+ this.fillZero((e.getMonth()+1)) +\"-\"+ this.fillZero(e.getDate());\n            this.saveOrUpdateIntoWarehouseRecord(date,this.provideForm.warehouse,this.provideForm.type,this.provideForm.department,this.provideForm.leader,this.provideRemarkForm.remark,this.formGoodsData.attrData,this.editOrderNO,this.editId);\n          }\n        }\n      },\n\n      //删除添加的物品\n      clickRowHandle(row,index){\n        window.event.stopPropagation();\n        if(this.delId === row.id){\n          this.delId = \"\";\n          this.delIndex = \"\";\n        }else{\n          this.delId = row.id;\n          this.delIndex = index;\n        }\n      },\n      rowClassName(row, index) {\n        if (this.delId === row.id) {\n          return 'demo-table-info-row';\n        }\n        return '';\n      },\n      delRowHandle(){\n        if(this.delIndex === \"\"){\n          return this.postWarningTip('请选择删除的物品');\n        }else{\n          this.formGoodsData.attrData.splice(this.delIndex,1);\n          if(this.$refs.child.selectedArrId.indexOf(this.delId)>-1){\n            let index = this.$refs.child.selectedArrId.indexOf(this.delId);\n            this.$refs.child.selectedArr.splice(index,1);\n            this.$refs.child.selectedArrId.splice(index,1);\n          }\n        }\n      }\n    },\n    mounted() {\n\n    }\n  }\n</script>\n<style lang=\"less\" scoped>\n  .ivu-table .demo-table-info-row td{\n    background-color: rgba(28, 144, 243, 0.1);\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/consumablesManage/views/consumablesManage/createOutOrderByCheck.vue","function injectStyle (context) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-15ae4111\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=styles&index=0!./createOutOrderByCheck.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./createOutOrderByCheck.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./createOutOrderByCheck.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-15ae4111\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=template&index=0!./createOutOrderByCheck.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-15ae4111\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/consumablesManage/views/consumablesManage/createOutOrderByCheck.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"zd-common-component\"},[_c('Form',{ref:\"provideForm\",staticClass:\"zd-cm-applyForm\",attrs:{\"model\":_vm.provideForm,\"rules\":_vm.ruleValidate,\"label-width\":80,\"inline\":\"\"}},[_c('FormItem',{attrs:{\"label\":\"出库日期：\",\"prop\":\"date\"}},[_c('DatePicker',{staticClass:\"zd-common-input-h38 zd-common-w150 zd-common-mr10\",attrs:{\"editable\":false,\"type\":\"date\",\"format\":\"yyyy-MM-dd\",\"placeholder\":\"出库日期\"},model:{value:(_vm.provideForm.date),callback:function ($$v) {_vm.$set(_vm.provideForm, \"date\", $$v)},expression:\"provideForm.date\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"出库仓库：\"}},[_c('Select',{staticClass:\"zd-common-w150 zd-common-mr10\",attrs:{\"placeholder\":\"选择出库仓库\"},model:{value:(_vm.provideForm.warehouse),callback:function ($$v) {_vm.$set(_vm.provideForm, \"warehouse\", $$v)},expression:\"provideForm.warehouse\"}},_vm._l((_vm.warehouseArr),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"出库类型：\",\"prop\":\"type\"}},[_c('Select',{staticClass:\"zd-common-input-h38 zd-common-w150 zd-common-mr10\",attrs:{\"placeholder\":\"选择出库类型\"},model:{value:(_vm.provideForm.type),callback:function ($$v) {_vm.$set(_vm.provideForm, \"type\", $$v)},expression:\"provideForm.type\"}},_vm._l((_vm.typeArr),function(item){return _c('Option',{key:item.code,attrs:{\"value\":item.code}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"部门：\",\"prop\":\"department\",\"label-width\":40}},[_c('Select',{staticClass:\"zd-common-input-h38 zd-common-w200 zd-common-mr10\",attrs:{\"placeholder\":\"选择领用部门\"},model:{value:(_vm.provideForm.department),callback:function ($$v) {_vm.$set(_vm.provideForm, \"department\", $$v)},expression:\"provideForm.department\"}},_vm._l((_vm.departmentArr),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"领用人：\",\"prop\":\"leader\",\"label-width\":50}},[_c('Select',{ref:\"leader\",staticClass:\"zd-common-input-h38 zd-common-w150 zd-common-fl\",attrs:{\"placeholder\":\"请输入领用人\",\"filterable\":\"\",\"remote\":\"\",\"remote-method\":_vm.remoteMethod,\"loading\":_vm.loading},model:{value:(_vm.provideForm.leader),callback:function ($$v) {_vm.$set(_vm.provideForm, \"leader\", $$v)},expression:\"provideForm.leader\"}},_vm._l((_vm.leaderArr),function(option){return _c('Option',{key:option.id,attrs:{\"value\":option.id}},[_vm._v(_vm._s(option.name))])}),1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-black-b zd-common-pt5 zd-common-pb5 zd-common-pl20\"},[_c('Button',{staticClass:\"zd-common-mr10 zd-common-h32 zd-common-lh8\",attrs:{\"type\":\"default\"},on:{\"click\":_vm.addGoodsHandle}},[_vm._v(\"\\n      添加\\n    \")]),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-mr10 zd-common-h32 zd-common-lh8\",attrs:{\"type\":\"default\"},on:{\"click\":_vm.delRowHandle}},[_vm._v(\"\\n      删除\\n    \")]),_vm._v(\" \"),_c('Input',{staticClass:\"zd-cm-w220 zd-common-input-h32\",attrs:{\"placeholder\":\"请输入物品编码，按Enter添加\",\"maxlength\":50},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getGoodsByCodeHandle($event)}},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}})],1),_vm._v(\" \"),_c('Form',{ref:\"formGoodsData\",staticClass:\"zd-common-mt10\",attrs:{\"model\":_vm.formGoodsData}},[_c('Table',{staticClass:\"zd-common-overflow-v\",attrs:{\"border\":\"\",\"columns\":_vm.goodsCols,\"data\":_vm.formGoodsData.attrData,\"show-summary\":\"\",\"summary-method\":_vm.handleSummary,\"row-class-name\":_vm.rowClassName},on:{\"on-row-click\":_vm.clickRowHandle},scopedSlots:_vm._u([{key:\"number\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [(_vm.formGoodsData.attrData[index].currentInventory>0)?_c('Form-item',{staticClass:\"zd-common-mt24\",attrs:{\"prop\":'attrData.' + index + '.number',\"rules\":{required: true, message:'不能为空', trigger:'blur',type:'number'}}},[_c('InputNumber',{attrs:{\"max\":_vm.formGoodsData.attrData[index].currentInventory,\"min\":1,\"precision\":0,\"placeholder\":\"数量\"},on:{\"on-change\":function($event){return _vm.getCurrIndex(index)}},model:{value:(_vm.formGoodsData.attrData[index].number),callback:function ($$v) {_vm.$set(_vm.formGoodsData.attrData[index], \"number\", $$v)},expression:\"formGoodsData.attrData[index].number\"}})],1):_c('Form-item',{staticClass:\"zd-common-mt24\",attrs:{\"prop\":'attrData.' + index + '.number',\"rules\":{required: true, message:'不能为空', trigger:'blur',type:'number'}}},[_c('InputNumber',{attrs:{\"readonly\":\"\"},model:{value:(_vm.formGoodsData.attrData[index].number),callback:function ($$v) {_vm.$set(_vm.formGoodsData.attrData[index], \"number\", $$v)},expression:\"formGoodsData.attrData[index].number\"}})],1)]}},{key:\"amount\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [_vm._v(\"\\n        \"+_vm._s(_vm.formGoodsData.attrData[index].amount)+\"\\n      \")]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-mt10 zd-common-clearFix\"},[_c('span',{staticClass:\"zd-common-fl\"},[_vm._v(\"制单人：\"+_vm._s(_vm.userName))]),_vm._v(\" \"),_c('span',{staticClass:\"zd-common-fl zd-common-ml20\"},[_vm._v(\"制单日期：\"+_vm._s(_vm.date))])]),_vm._v(\" \"),_c('Form',{ref:\"provideRemarkForm\",staticClass:\"zd-common-mt20\",attrs:{\"model\":_vm.provideRemarkForm}},[_c('FormItem',{staticClass:\"zd-common-mb0\",attrs:{\"label\":\"备注：\"}},[_c('Input',{staticClass:\"zd-common-fl\",staticStyle:{\"width\":\"826px\"},attrs:{\"placeholder\":\"备注\",\"maxlength\":100,\"type\":\"textarea\",\"autosize\":{minRows: 5,maxRows: 5}},model:{value:(_vm.provideRemarkForm.remark),callback:function ($$v) {_vm.$set(_vm.provideRemarkForm, \"remark\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"provideRemarkForm.remark\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-modal-footer zd-common-pt30\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{staticClass:\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\",attrs:{\"type\":\"primary\",\"loading\":_vm.saveLoading},on:{\"click\":_vm.handleSubmit}},[(!_vm.saveLoading)?_c('span',[_vm._v(\"确定\")]):_c('span',[_vm._v(\"正在保存...\")])]),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-w100 zd-common-h32 zd-common-lh8\",on:{\"click\":_vm.toOut}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('Modal',{attrs:{\"mask-closable\":false,\"width\":1200},model:{value:(_vm.addGoodsModal),callback:function ($$v) {_vm.addGoodsModal=$$v},expression:\"addGoodsModal\"}},[_c('h3',{staticClass:\"zd-common-modal-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"物品档案\")])]),_vm._v(\" \"),_c('add-goods',{ref:\"child\"}),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-modal-footer zd-common-pt10\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('div',{staticClass:\"zd-common-modal-footer zd-common-pt10\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{staticClass:\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveGoodsHandle}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-w100 zd-common-h32 zd-common-lh8\",on:{\"click\":function($event){_vm.addGoodsModal = false}}},[_vm._v(\"取消\")])],1)])],1),_vm._v(\" \"),_c('Modal',{attrs:{\"mask-closable\":false,\"width\":920},on:{\"on-cancel\":_vm.cancelInventoryModal},model:{value:(_vm.inventoryModal),callback:function ($$v) {_vm.inventoryModal=$$v},expression:\"inventoryModal\"}},[_c('h3',{staticClass:\"zd-common-modal-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(_vm._s(_vm.goodsName))])]),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-tr\"},[_c('i',{staticClass:\"zd-common-fs12 zd-common-font-style zd-common-des-font-c\"},[_vm._v(\"系统默认按照先入先出的原则自动分配出库数量\")])]),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-h400 zd-common-mt10\"},[_c('vue-scroll',[_c('Form',{ref:\"inventoryData\",attrs:{\"model\":_vm.inventoryData}},[_c('Table',{staticClass:\"zd-common-overflow-v zd-cm-out-table\",attrs:{\"border\":\"\",\"columns\":_vm.inventoryCols,\"data\":_vm.inventoryData.attrData,\"show-summary\":\"\",\"summary-method\":_vm.handleInventorySummary},scopedSlots:_vm._u([{key:\"outNum\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn (_vm.inventoryData.attrData[index].surplusNum>0)?[_c('Form-item',{staticClass:\"zd-common-mt24\"},[_c('InputNumber',{attrs:{\"max\":_vm.inventoryData.attrData[index].surplusNum,\"min\":1,\"precision\":0,\"placeholder\":\"数量\"},on:{\"on-change\":function($event){return _vm.calcAmount(index)}},model:{value:(_vm.inventoryData.attrData[index].outNum),callback:function ($$v) {_vm.$set(_vm.inventoryData.attrData[index], \"outNum\", $$v)},expression:\"inventoryData.attrData[index].outNum\"}})],1)]:undefined}},{key:\"amount\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [_vm._v(\"\\n              \"+_vm._s(_vm.inventoryData.attrData[index].amount)+\"\\n            \")]}}],null,true)})],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-modal-footer zd-common-pt10\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{staticClass:\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmInventoryModal}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-w100 zd-common-h32 zd-common-lh8\",on:{\"click\":_vm.cancelInventoryModal}},[_vm._v(\"取消\")])],1)])],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-15ae4111\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.4@vue-loader/lib/selector.js?type=template&index=0!./src/consumablesManage/views/consumablesManage/createOutOrderByCheck.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}