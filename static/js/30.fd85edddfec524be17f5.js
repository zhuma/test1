webpackJsonp([30],{gyjd:function(o,t){},xvKL:function(o,t,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d("fYFQ"),a=d.n(n),e=(d("Kmkn"),{components:{Treeselect:a.a},data:function(){return{addForm:{parents:null,name:"",sortNum:null},ruleValidate:{parents:[{required:!0,message:"不能为空",trigger:"change"}],name:[{required:!0,message:"不能为空",trigger:"blur"}]},saveLoading:!1,isEdit:!0,editId:"",treeOptions:[],normalizer:function(o){return{id:o.id,label:o.name,children:o.children}},data:[],classifyDetail:{},delModal:!1}},created:function(){this.getKind()},methods:{getKind:function(){var o=this;this.treeOptions=[],this.data=[],this.getGoodsKindTree().then(function(t){o.treeOptions=t.data,o.recursionFnTwo(o.data,t.data)})},changeSlideTree:function(o,t){t.selected?(this.isEdit=!1,this.getClassifyDetail(t.id)):(this.isEdit=!0,this.clearHandle())},getClassifyDetail:function(o){var t=this;BaseAxios({method:"post",url:"/sr/storeroomData!getGoodsKindInfo.action",data:{id:o}}).then(function(o){var d=o.data;t.classifyDetail=o.data,t.addForm.parents=d.parentId,t.addForm.name=d.name,t.addForm.sortNum=""===d.code?null:parseInt(d.code),t.editId=d.id}).catch(function(o){t.postErrorTip("请求失败"),console.log(o)})},deleteGoodsKind:function(o){var t=this;BaseAxios({method:"post",url:"/sr/storeroomData!deleteGoodsKind.action",data:{id:o}}).then(function(o){""!==o.data?t.postWarningTip(o.data):(t.classifyDetail=o.data,t.clearHandle()),t.saveLoading=!1,t.delModal=!1,t.getKind()}).catch(function(o){t.delModal=!1,t.saveLoading=!1,t.postErrorTip("请求失败"),console.log(o)})},deleteKindHandle:function(){this.saveLoading=!0,this.deleteGoodsKind(this.editId)},showDel:function(){if(""===this.editId)return this.postWarningTip("请选择要删除的分类");this.delModal=!0},addGoodClassify:function(){this.isEdit=!0,this.clearSelected(this.data),this.clearHandle()},handleSubmit:function(o){var t=this;this.$refs[o].validate(function(o){if(o){t.saveLoading=!0;var d="";d=null===t.addForm.sortNum?"":t.addForm.sortNum,t.saveOrUpdateGoodsKind(t.addForm.parents,t.addForm.name,d,t.editId)}})},saveOrUpdateGoodsKind:function(o,t,d,n){var a=this;BaseAxios({method:"post",url:"/sr/storeroomData!saveOrUpdateGoodsKind.action",data:{"goodsKind.goodsKind.id":o,"goodsKind.name":t,"goodsKind.code":d,"goodsKind.id":n}}).then(function(o){a.saveLoading=!1,a.isEdit=!0,a.clearHandle(),a.getKind()}).catch(function(o){a.saveLoading=!1,a.postErrorTip("请求失败"),console.log(o)})},clearHandle:function(){this.addForm.parents=null,this.addForm.name="",this.addForm.sortNum=null,this.editId="",this.classifyDetail={}},clearSelected:function(o){for(var t=this,d=0,n=o.length;d<n;d++)t.$set(o[d],"selected",!1),null!=o[d].children&&o[d].children.length>0&&function(){for(var o=arguments[0],d=0,n=o.length;d<n;d++)t.$set(o[d],"selected",!1),null!=o[d].children&&o[d].children.length>0&&t.clearSelected(o[d].children)}(o[d].children)},validateField:function(o,t){this.$refs[o].validateField(t)},closeOnSelect:function(o,t){this.addForm.parents=o}},mounted:function(){}}),m=d("W5g0");var s=function(o){d("gyjd")},i=Object(m.a)(e,function(){var o=this,t=o.$createElement,d=o._self._c||t;return d("div",{staticClass:"zd-common-component zd-common-hp100"},[d("div",{staticClass:"zd-common-clearFix zd-common-hp100"},[d("div",{staticClass:"zd-common-border zd-common-fl zd-cm-left zd-common-hp100"},[d("div",{staticClass:"zd-common-border-bottom1 zd-common-p10 zd-common-tc zd-common-h60"},[d("Button",{staticClass:"zd-common-pl11 zd-common-pr11",attrs:{type:"primary","custom-icon":"zd-common-icon-add"},on:{click:o.addGoodClassify}},[o._v("\n              物品分类\n            ")])],1),o._v(" "),d("div",{staticClass:"zd-cm-tree zd-common-overflow-y-a"},[d("Tree",{staticClass:"zd-common-plr10",attrs:{data:o.data},on:{"on-select-change":o.changeSlideTree}})],1)]),o._v(" "),o.isEdit?d("div",{staticClass:"zd-common-border zd-common-p100 zd-common-fl zd-cm-right zd-common-ml20 zd-common-hp100"},[d("Form",{ref:"addForm",staticClass:"zd-common-w500 zd-common-auto",attrs:{model:o.addForm,rules:o.ruleValidate,"label-width":100}},[d("FormItem",{attrs:{label:"上级分类："}},[d("treeselect",{staticClass:"zd-common-w300",attrs:{multiple:!1,options:o.treeOptions,normalizer:o.normalizer,noOptionsText:"暂无数据",placeholder:"请选择上级分类"},on:{close:o.closeOnSelect},model:{value:o.addForm.parents,callback:function(t){o.$set(o.addForm,"parents",t)},expression:"addForm.parents"}})],1),o._v(" "),d("FormItem",{attrs:{label:"分类名称：",prop:"name"}},[d("Input",{staticClass:"zd-common-w300",attrs:{placeholder:"请输入分类名称",maxlength:10},model:{value:o.addForm.name,callback:function(t){o.$set(o.addForm,"name","string"==typeof t?t.trim():t)},expression:"addForm.name"}})],1),o._v(" "),d("FormItem",{attrs:{label:"排序号："}},[d("InputNumber",{staticClass:"zd-common-w300",attrs:{placeholder:"请输入排序号",precision:0,min:1,max:1e8},model:{value:o.addForm.sortNum,callback:function(t){o.$set(o.addForm,"sortNum","string"==typeof t?t.trim():t)},expression:"addForm.sortNum"}}),o._v(" "),d("p",{staticClass:"zd-common-des-font-c zd-common-fs12"},[o._v("只允许输入正整数，序号越小排序越靠前")])],1)],1),o._v(" "),d("div",{staticClass:"zd-common-modal-footer zd-common-pt10"},[d("Button",{staticClass:"zd-common-mr24 zd-common-w100 zd-common-h32 zd-common-lh8",attrs:{type:"primary",loading:o.saveLoading},on:{click:function(t){return o.handleSubmit("addForm")}}},[o.saveLoading?d("span",[o._v("正在保存...")]):d("span",[o._v("保存")])]),o._v(" "),d("Button",{staticClass:"zd-common-w100 zd-common-h32 zd-common-lh8",on:{click:function(t){o.isEdit=!1}}},[o._v("取消")])],1)],1):d("div",{staticClass:"zd-common-border zd-common-p100 zd-common-fl zd-cm-right zd-common-ml20 zd-common-hp100"},[d("div",{staticClass:"zd-common-w500 zd-common-auto"},[d("p",{staticClass:"zd-common-clearFix zd-common-h36 zd-common-lh36"},[d("span",{staticClass:"zd-common-fl zd-common-w100 zd-common-dib zd-common-tr"},[o._v("上级分类：")]),o._v(" "),d("span",{staticClass:"zd-common-fl zd-common-border-bottom1 zd-common-w350 zd-common-dib zd-common-pb5 zd-common-hp100"},[o._v("\n              "+o._s(o.classifyDetail.parentName))])]),o._v(" "),d("p",{staticClass:"zd-common-clearFix zd-common-mt30 zd-common-h36 zd-common-lh36"},[d("span",{staticClass:"zd-common-fl zd-common-w100 zd-common-dib zd-common-tr"},[o._v("分类名称：")]),o._v(" "),d("span",{staticClass:"zd-common-fl zd-common-border-bottom1 zd-common-w350 zd-common-dib zd-common-pb5 zd-common-hp100"},[o._v("\n              "+o._s(o.classifyDetail.name))])]),o._v(" "),d("p",{staticClass:"zd-common-clearFix zd-common-mt30 zd-common-h36 zd-common-lh36"},[d("span",{staticClass:"zd-common-fl zd-common-w100 zd-common-dib zd-common-tr"},[o._v("排序号：")]),o._v(" "),d("span",{staticClass:"zd-common-fl zd-common-border-bottom1 zd-common-w350 zd-common-dib zd-common-pb5 zd-common-hp100"},[o._v("\n              "+o._s(o.classifyDetail.code))])])]),o._v(" "),d("div",{staticClass:"zd-common-modal-footer"},[d("Button",{staticClass:"zd-common-mr24 zd-common-w100 zd-common-h32 zd-common-lh8",attrs:{type:"primary"},on:{click:function(t){o.isEdit=!0}}},[o._v("编辑\n          ")]),o._v(" "),d("Button",{staticClass:"zd-common-w100 zd-common-h32 zd-common-lh8",on:{click:o.showDel}},[o._v("删除")])],1)])]),o._v(" "),d("Modal",{attrs:{"mask-closable":!1,width:360},model:{value:o.delModal,callback:function(t){o.delModal=t},expression:"delModal"}},[d("h3",{attrs:{slot:"header"},slot:"header"}),o._v(" "),d("div",{staticClass:"zd-common-tc"},[d("div",{staticClass:"zd-common-modal-waring zd-common-auto"}),o._v(" "),d("p",{staticClass:"zd-common-primary-c zd-common-font-size-large zd-common-mt15"},[o._v("是否确认删除？")])]),o._v(" "),d("div",{staticClass:"zd-common-modal-footer zd-common-pt10",attrs:{slot:"footer"},slot:"footer"},[d("Button",{staticClass:"zd-common-mr24 zd-common-w100 zd-common-h32 zd-common-lh8",attrs:{type:"primary",loading:o.saveLoading},on:{click:o.deleteKindHandle}},[o.saveLoading?d("span",[o._v("正在删除...")]):d("span",[o._v("确定")])]),o._v(" "),d("Button",{staticClass:"zd-common-w100 zd-common-h32 zd-common-lh8",on:{click:function(t){o.delModal=!1}}},[o._v("取消")])],1)])],1)},[],!1,s,"data-v-38794f4d",null);t.default=i.exports}});
//# sourceMappingURL=30.fd85edddfec524be17f5.js.map