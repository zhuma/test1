{"version":3,"sources":["webpack:///src/consumablesManage/views/setting/warehouseFiles.vue","webpack:///./src/consumablesManage/views/setting/warehouseFiles.vue","webpack:///./src/consumablesManage/views/setting/warehouseFiles.vue?0c15"],"names":["warehouseFiles","data","_this","this","addModal","addForm","school","name","code","leader","leaderName","address","ruleValidate","required","message","trigger","validator","rule","value","callback","Error","utils","regCode","test","BaseAxios","method","url","id","editId","then","response","catch","error","console","log","regCodeMsg","type","modalTitle","leaderArr","loading","columns","align","title","width","key","render","h","params","props","ghost","style","height","padding","marginRight","on","click","showModifyModal","row","showDelModal","pageSize","pageNum","total","selectLoading","allSchoolArr","schoolName","warehouseArr","warehouseName","saveLoading","delModal","created","_this2","getAllSchool","res","getStoreroomList","methods","transCode","Object","changeSchool","val","getAllWarehouse","remoteMethod","_this3","selectLeader","showAddModal","$refs","resetFields","saveOrUpdateStoreroom","_this4","postSuccessTip","postErrorTip","handleSubmit","_this5","validate","valid","join","schoolId","userName","_this6","aData","length","map","item","push","userNames","classroom","getStoreroomInfo","_this7","userIds","split","classroomId","i","deleteStoreroom","_this8","postWarningTip","confirmDelete","selectHandle","mounted","__vue_styles__","context","__webpack_require__","Component","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","custom-icon","_v","placeholder","clearable","model","$$v","expression","_l","_s","filterable","remote","remote-method","option","ref","border","mask-closable","slot","rules","label-width","label","prop","on-change","$set","maxlength","on-blur","trim","multiple","index","$event","__webpack_exports__"],"mappings":"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","file":"static/js/14.110f02d8e9f9c3146287.js","sourcesContent":["<template>\n  <div class=\"zd-common-component\">\n    <div class=\"zd-common-clearFix\">\n      <Button type=\"primary\" class=\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10\" custom-icon=\"zd-common-icon-add\" @click=\"showAddModal\">\n        仓库档案\n      </Button>\n      <div class=\"zd-common-fr\">\n        <Select v-model=\"schoolName\" placeholder=\"全部学校\"\n                class=\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\" clearable>\n          <Option v-for=\"item in allSchoolArr\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n        </Select>\n        <Input v-model=\"warehouseName\" placeholder=\"仓库名称\" class=\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\"/>\n        <Select\n          class=\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\"\n          placeholder=\"负责人\"\n          v-model=\"leader\"\n          filterable\n          remote\n          :remote-method=\"remoteMethod\"\n          :loading=\"loading\">\n          <Option v-for=\"option in leaderArr\" :value=\"option.id\" :key=\"option.id\">{{option.name}}</Option>\n        </Select>\n\n        <Button type=\"primary\" class=\"zd-common-fl\" @click=\"selectHandle\" :loading=\"selectLoading\">\n          <span v-if=\"!selectLoading\">查询</span>\n          <span v-else>正在查询...</span>\n        </Button>\n      </div>\n    </div>\n    <div class=\"zd-common-mt16\">\n      <Table ref=\"currentRowTable\" border :columns=\"columns\" :data=\"data\"></Table>\n    </div>\n    <!--添加仓库档案-->\n    <Modal v-model=\"addModal\" :mask-closable=\"false\" class=\"zd-cm-form\">\n      <h3 slot=\"header\" class=\"zd-common-modal-header\">\n        <span>{{ modalTitle }}</span>\n      </h3>\n      <Form ref=\"addForm\" :model=\"addForm\" :rules=\"ruleValidate\" :label-width=\"100\">\n        <FormItem label=\"所属校区：\"  prop=\"school\">\n          <Select v-model=\"addForm.school\" placeholder=\"请选择学校\" class=\"zd-common-w300\" @on-change=\"changeSchool\">\n            <Option v-for=\"item in allSchoolArr\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"仓库名称：\"  prop=\"name\">\n          <Input v-model.trim=\"addForm.name\" placeholder=\"请输入仓库名称\" :maxlength=\"30\" class=\"zd-common-w300\"\n                 @on-blur=\"transCode\"></Input>\n        </FormItem>\n        <FormItem label=\"仓库编码：\"  prop=\"code\">\n          <Input v-model.trim=\"addForm.code\" placeholder=\"请输入仓库编码\" :maxlength=\"30\"\n                 class=\"zd-common-w300\"></Input>\n        </FormItem>\n        <FormItem label=\"负责人：\"  prop=\"leader\">\n          <!--<Input v-model.trim=\"addForm.leader\" placeholder=\"请输入本仓库负责人\" :maxlength=\"30\" class=\"zd-common-w300\"></Input>-->\n          <Select\n            class=\"zd-common-w300\"\n            placeholder=\"请输入本仓库负责人\"\n            v-model=\"addForm.leader\"\n            filterable\n            remote\n            multiple\n            :remote-method=\"remoteMethod\"\n            :loading=\"loading\"\n          >\n            <Option v-for=\"(option, index) in leaderArr\" :value=\"option.id\" :key=\"option.id\">{{option\n              .name}}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"仓库地址：\" >\n          <Select v-model=\"addForm.address\" placeholder=\"请选择仓库地址\" class=\"zd-common-w300\">\n            <Option v-for=\"item in warehouseArr\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n      </Form>\n      <div slot=\"footer\" class=\"zd-common-modal-footer zd-common-pt6\">\n        <Button type=\"primary\" class=\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\"\n                @click=\"handleSubmit('addForm')\"\n                :loading=\"saveLoading\">\n          <span v-if=\"!saveLoading\">确定</span>\n          <span v-else>正在保存...</span>\n        </Button>\n        <Button @click=\"addModal = false\" class=\"zd-common-w100 zd-common-h32 zd-common-lh8\">取消</Button>\n      </div>\n    </Modal>\n\n    <!--删除-->\n    <Modal v-model=\"delModal\" :mask-closable=\"false\" :width=\"360\">\n      <h3 slot=\"header\"></h3>\n      <div class=\"zd-common-tc\">\n        <div class=\"zd-common-modal-waring zd-common-auto\"></div>\n        <p class=\"zd-common-primary-c zd-common-font-size-large zd-common-mt15\">是否确认删除？</p>\n      </div>\n      <div slot=\"footer\" class=\"zd-common-modal-footer zd-common-pt10\">\n        <Button type=\"primary\" class=\"zd-common-mr24 zd-common-w100 zd-common-h32 zd-common-lh8\"\n                :loading=\"saveLoading\" @click=\"confirmDelete\">\n          <span v-if=\"!saveLoading\">确定</span>\n          <span v-else>正在删除...</span>\n        </Button>\n        <Button @click=\"delModal = false\" class=\"zd-common-w100 zd-common-h32 zd-common-lh8\">取消</Button>\n      </div>\n    </Modal>\n  </div>\n</template>\n<script>\n  import {transformPY,utils} from \"../../../comm/script/utils\";\n  export default {\n    data() {\n      const validateCode = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error('不能为空'));\n        } else {\n          if(utils.regCode.test(value)){\n            BaseAxios(\n              {\n                method: 'post',\n                url: '/sr/storeroomData!checkStoreroomCodeRepeat.action',\n                data: {\n                  code:value,\n                  id:this.editId\n                }\n              })\n              .then((response) => {\n                if(response.data){\n                  callback(new Error('编码重复'));\n                }\n                callback();\n              })\n              .catch((error) => {\n                callback(new Error('验证失败'));\n                console.log(error);\n              });\n          }else{\n            callback(new Error(utils.regCodeMsg));\n          }\n        }\n      }\n      return {\n        //添加仓库档案\n        addModal:false,\n        addForm:{\n          school:'',\n          name:'',\n          code:'',\n          leader:[],\n          leaderName:'',\n          address:'',\n        },\n        ruleValidate:{\n          school: [\n            { required: true, message:'不能为空', trigger: 'change' }\n          ],\n          name: [\n            { required: true, message:'不能为空', trigger: 'blur' }\n          ],\n          code: [\n            { required: true, validator:validateCode, trigger: 'blur' }\n          ],\n          leader: [\n            { required: true, type:'array', message:'不能为空', trigger: 'blur' }\n          ],\n          /*address: [\n            { required: true, message:'不能为空', trigger: 'change' }\n          ],*/\n        },\n        modalTitle:'添加仓库档案',\n        //负责人\n        leaderArr:[],\n        loading:false,\n        //列表\n        columns: [\n          {\n            type: 'index',\n            align: 'center',\n            title: '序号',\n            width:65\n          },\n          {\n            title: '所属校区',\n            align: 'center',\n            key: 'school'\n          },\n          {\n            title: '仓库名称',\n            align: 'center',\n            key: 'name'\n          },\n          {\n            title: '仓库编码',\n            align: 'center',\n            key: 'code',\n          },\n          {\n            title: '负责人',\n            align: 'center',\n            key: 'leader',\n          },\n          {\n            title: '仓库地址',\n            align: 'center',\n            key: 'address',\n          },\n          {\n            title: '操作',\n            align: 'center',\n            key: 'action',\n            width:160,\n            render: (h, params) => {\n              return h('div', [\n                h('Button', {\n                  props:{\n                    type:'primary',\n                    ghost:true,\n                  },\n                  style: {\n                    height: \"28px\",\n                    padding:'0 15px 1px',\n                    marginRight:'10px'\n                  },\n                  on: {\n                    click: () => {\n                      this.showModifyModal(params.row.id);\n                    }\n                  }\n                }, '编辑'),\n                h('Button', {\n                  props:{\n                    type:'error',\n                    ghost:true,\n                  },\n                  style: {\n                    height: \"28px\",\n                    padding:'0 15px 1px'\n                  },\n                  on: {\n                    click: () => {\n                      this.showDelModal(params.row.id);\n                    }\n                  }\n                }, '删除')\n              ]);\n            }\n          },\n        ],\n        data: [],\n        pageSize:10,\n        pageNum:1,\n        total:0,\n        selectLoading:false,\n        //查询\n        allSchoolArr:[],\n        schoolName:'',\n        warehouseArr:[],\n        warehouseName:'',\n        leader:'',\n        saveLoading:false,\n        //编辑\n        editId:'',\n        //删除\n        delModal:false,\n      }\n    },\n    created(){\n      this.getAllSchool().then((res)=>{\n        this.allSchoolArr = res.data;\n      });\n      this.getStoreroomList(this.schoolName,this.warehouseName,this.leader);\n    },\n    methods: {\n      //自动生成code\n      transCode(){\n        this.addForm.code = transformPY(this.addForm.name);\n      },\n      //切换学校\n      changeSchool(val){\n        this.getAllWarehouse(val);\n      },\n      //选择负责人\n      remoteMethod(name){\n        this.selectLeader(name).then((res)=>{\n          this.leaderArr = res.data;\n        })\n      },\n      //添加仓库档案\n      showAddModal(){\n        this.addModal = true;\n        this.modalTitle = '添加仓库档案';\n        this.$refs['addForm'].resetFields();\n      },\n      saveOrUpdateStoreroom(school,name,code,leader,address,editId) {\n        let params = {};\n        params[\"storeroom.school.id\"] = school;\n        params[\"storeroom.name\"] = name;\n        params[\"storeroom.code\"] = code;\n        params[\"userIds\"] = leader;\n        if(address!==\"\"){\n          params[\"storeroom.classroom.id\"] = address;\n        }\n        params[\"storeroom.id\"] = editId;\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!saveOrUpdateStoreroom.action',\n          data:params,\n        })\n          .then((response) => {\n            this.saveLoading=false;\n            this.addModal=false;\n            this.getStoreroomList(this.schoolName,this.warehouseName,this.leader);\n            this.postSuccessTip('保存成功');\n          })\n          .catch((error) => {\n            this.saveLoading=false;\n            this.addModal=false;\n            this.postErrorTip('请求失败');\n            console.log(error);\n          });\n      },\n      //保存验证\n      handleSubmit(name) {\n        this.$refs[name].validate((valid) => {\n          if (valid) {\n            this.saveLoading=true;\n            this.saveOrUpdateStoreroom(this.addForm.school,this.addForm.name,this.addForm.code,this.addForm.leader.join(','),this.addForm.address,this.editId);\n          }\n        })\n      },\n      //获取仓库列表\n      getStoreroomList(schoolId,name,userName) {\n        this.data = [];\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!getStoreroomsByParam.action',\n          data:{\n            schoolId:schoolId,\n            name:name,\n            userName:userName\n          },\n        })\n          .then((response) => {\n            let aData = response.data;\n            if(aData && aData.length>0){\n              aData.map((item)=>{\n                this.data.push({\n                  id:item.id,\n                  school:item.schoolName,\n                  name:item.name,\n                  code:item.code,\n                  leader:item.userNames,\n                  address:item.classroom\n                })\n              })\n            }\n            this.selectLoading = false;\n          })\n          .catch((error) => {\n            this.selectLoading = false;\n            this.postErrorTip('请求失败');\n            console.log(error);\n          });\n      },\n      //编辑获取信息\n      getStoreroomInfo(id) {\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!getStoreroomInfo.action',\n          data:{\n            id:id\n          },\n        })\n          .then((response) => {\n            let aData = response.data;\n            this.addForm.school = aData.schoolId;\n            this.addForm.name = aData.name;\n            this.addForm.code = aData.code;\n            this.addForm.leader = aData.userIds.split(',');\n            this.addForm.leaderName = aData.userNames.split(',');\n            this.addForm.address = aData.classroomId;\n            this.editId = aData.id;\n            this.addForm.leader.map((item,i)=>{\n              this.leaderArr.push({\n                id:item,\n                name:this.addForm.leaderName[i]\n              })\n            })\n          })\n          .catch((error) => {\n            this.postErrorTip('请求失败');\n            console.log(error);\n          });\n      },\n      showModifyModal(id){\n        this.addModal = true;\n        this.$refs['addForm'].resetFields();\n        this.modalTitle = '编辑仓库档案';\n        this.getStoreroomInfo(id);\n      },\n      //删除\n      showDelModal(id){\n        this.editId=id;\n        this.delModal = true;\n      },\n      deleteStoreroom(id) {\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!deleteStoreroom.action',\n          data:{\n            id:id\n          },\n        })\n          .then((response) => {\n            if(response.data !== \"\"){\n              this.postWarningTip(response.data);\n            }else{\n              this.getStoreroomList(this.schoolName,this.warehouseName,this.leader);\n            }\n            this.saveLoading = false;\n          })\n          .catch((error) => {\n            this.saveLoading = false;\n            this.postErrorTip('请求失败');\n            console.log(error);\n          });\n      },\n      confirmDelete(){\n        this.saveLoading = true;\n        this.delModal=false;\n        this.deleteStoreroom(this.editId);\n      },\n      //查询\n      selectHandle(){\n        this.selectLoading = true;\n        this.getStoreroomList(this.schoolName,this.warehouseName,this.leader);\n      },\n    },\n    mounted(){\n\n    }\n  }\n</script>\n<style lang=\"less\" scoped>\n  .ivu-table .demo-table-info-row td{\n    background-color: rgba(28, 144, 243, 0.1);\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/consumablesManage/views/setting/warehouseFiles.vue","function injectStyle (context) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d6be5e7a\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=styles&index=0!./warehouseFiles.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./warehouseFiles.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./warehouseFiles.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d6be5e7a\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=template&index=0!./warehouseFiles.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d6be5e7a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/consumablesManage/views/setting/warehouseFiles.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"zd-common-component\"},[_c('div',{staticClass:\"zd-common-clearFix\"},[_c('Button',{staticClass:\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10\",attrs:{\"type\":\"primary\",\"custom-icon\":\"zd-common-icon-add\"},on:{\"click\":_vm.showAddModal}},[_vm._v(\"\\n      仓库档案\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-fr\"},[_c('Select',{staticClass:\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\",attrs:{\"placeholder\":\"全部学校\",\"clearable\":\"\"},model:{value:(_vm.schoolName),callback:function ($$v) {_vm.schoolName=$$v},expression:\"schoolName\"}},_vm._l((_vm.allSchoolArr),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1),_vm._v(\" \"),_c('Input',{staticClass:\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\",attrs:{\"placeholder\":\"仓库名称\"},model:{value:(_vm.warehouseName),callback:function ($$v) {_vm.warehouseName=$$v},expression:\"warehouseName\"}}),_vm._v(\" \"),_c('Select',{staticClass:\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\",attrs:{\"placeholder\":\"负责人\",\"filterable\":\"\",\"remote\":\"\",\"remote-method\":_vm.remoteMethod,\"loading\":_vm.loading},model:{value:(_vm.leader),callback:function ($$v) {_vm.leader=$$v},expression:\"leader\"}},_vm._l((_vm.leaderArr),function(option){return _c('Option',{key:option.id,attrs:{\"value\":option.id}},[_vm._v(_vm._s(option.name))])}),1),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-fl\",attrs:{\"type\":\"primary\",\"loading\":_vm.selectLoading},on:{\"click\":_vm.selectHandle}},[(!_vm.selectLoading)?_c('span',[_vm._v(\"查询\")]):_c('span',[_vm._v(\"正在查询...\")])])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-mt16\"},[_c('Table',{ref:\"currentRowTable\",attrs:{\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.data}})],1),_vm._v(\" \"),_c('Modal',{staticClass:\"zd-cm-form\",attrs:{\"mask-closable\":false},model:{value:(_vm.addModal),callback:function ($$v) {_vm.addModal=$$v},expression:\"addModal\"}},[_c('h3',{staticClass:\"zd-common-modal-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(_vm._s(_vm.modalTitle))])]),_vm._v(\" \"),_c('Form',{ref:\"addForm\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.ruleValidate,\"label-width\":100}},[_c('FormItem',{attrs:{\"label\":\"所属校区：\",\"prop\":\"school\"}},[_c('Select',{staticClass:\"zd-common-w300\",attrs:{\"placeholder\":\"请选择学校\"},on:{\"on-change\":_vm.changeSchool},model:{value:(_vm.addForm.school),callback:function ($$v) {_vm.$set(_vm.addForm, \"school\", $$v)},expression:\"addForm.school\"}},_vm._l((_vm.allSchoolArr),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"仓库名称：\",\"prop\":\"name\"}},[_c('Input',{staticClass:\"zd-common-w300\",attrs:{\"placeholder\":\"请输入仓库名称\",\"maxlength\":30},on:{\"on-blur\":_vm.transCode},model:{value:(_vm.addForm.name),callback:function ($$v) {_vm.$set(_vm.addForm, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"addForm.name\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"仓库编码：\",\"prop\":\"code\"}},[_c('Input',{staticClass:\"zd-common-w300\",attrs:{\"placeholder\":\"请输入仓库编码\",\"maxlength\":30},model:{value:(_vm.addForm.code),callback:function ($$v) {_vm.$set(_vm.addForm, \"code\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"addForm.code\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"负责人：\",\"prop\":\"leader\"}},[_c('Select',{staticClass:\"zd-common-w300\",attrs:{\"placeholder\":\"请输入本仓库负责人\",\"filterable\":\"\",\"remote\":\"\",\"multiple\":\"\",\"remote-method\":_vm.remoteMethod,\"loading\":_vm.loading},model:{value:(_vm.addForm.leader),callback:function ($$v) {_vm.$set(_vm.addForm, \"leader\", $$v)},expression:\"addForm.leader\"}},_vm._l((_vm.leaderArr),function(option,index){return _c('Option',{key:option.id,attrs:{\"value\":option.id}},[_vm._v(_vm._s(option\n            .name))])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"仓库地址：\"}},[_c('Select',{staticClass:\"zd-common-w300\",attrs:{\"placeholder\":\"请选择仓库地址\"},model:{value:(_vm.addForm.address),callback:function ($$v) {_vm.$set(_vm.addForm, \"address\", $$v)},expression:\"addForm.address\"}},_vm._l((_vm.warehouseArr),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-modal-footer zd-common-pt6\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{staticClass:\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\",attrs:{\"type\":\"primary\",\"loading\":_vm.saveLoading},on:{\"click\":function($event){return _vm.handleSubmit('addForm')}}},[(!_vm.saveLoading)?_c('span',[_vm._v(\"确定\")]):_c('span',[_vm._v(\"正在保存...\")])]),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-w100 zd-common-h32 zd-common-lh8\",on:{\"click\":function($event){_vm.addModal = false}}},[_vm._v(\"取消\")])],1)],1),_vm._v(\" \"),_c('Modal',{attrs:{\"mask-closable\":false,\"width\":360},model:{value:(_vm.delModal),callback:function ($$v) {_vm.delModal=$$v},expression:\"delModal\"}},[_c('h3',{attrs:{\"slot\":\"header\"},slot:\"header\"}),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-tc\"},[_c('div',{staticClass:\"zd-common-modal-waring zd-common-auto\"}),_vm._v(\" \"),_c('p',{staticClass:\"zd-common-primary-c zd-common-font-size-large zd-common-mt15\"},[_vm._v(\"是否确认删除？\")])]),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-modal-footer zd-common-pt10\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{staticClass:\"zd-common-mr24 zd-common-w100 zd-common-h32 zd-common-lh8\",attrs:{\"type\":\"primary\",\"loading\":_vm.saveLoading},on:{\"click\":_vm.confirmDelete}},[(!_vm.saveLoading)?_c('span',[_vm._v(\"确定\")]):_c('span',[_vm._v(\"正在删除...\")])]),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-w100 zd-common-h32 zd-common-lh8\",on:{\"click\":function($event){_vm.delModal = false}}},[_vm._v(\"取消\")])],1)])],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-d6be5e7a\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.4@vue-loader/lib/selector.js?type=template&index=0!./src/consumablesManage/views/setting/warehouseFiles.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}