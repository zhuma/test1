webpackJsonp([26],{XuB5:function(t,e){},cfj0:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("3cXf"),n=o.n(a),r=(o("+RvV"),{data:function(){var t=this;return{columns:[{type:"index",align:"center",title:"序号",width:65},{title:"申领单号",align:"center",key:"applyNum"},{title:"申领部门",align:"center",key:"applyDepart"},{title:"申领日期",align:"center",key:"applyDate"},{title:"申领类型",align:"center",key:"applyType"},{title:"申领数量",align:"center",key:"goodsNum"},{title:"申请人",align:"center",key:"applyPerson"},{title:"状态",align:"center",key:"status"},{title:"操作",align:"center",key:"action",width:160,render:function(e,o){return"未发放"===o.row.status?e("div",[e("Button",{props:{type:"primary",ghost:!0},style:{height:"28px",padding:"0 15px 1px",marginRight:"10px"},on:{click:function(){t.showViewModal(o.row.id)}}},"查看"),e("Button",{props:{type:"primary",ghost:!0},style:{height:"28px",padding:"0 15px 1px"},on:{click:function(){t.showProvideModal(o.row.id)}}},"发放")]):e("div",[e("Button",{props:{type:"primary",ghost:!0},style:{height:"28px",padding:"0 15px 1px"},on:{click:function(){t.showViewModal(o.row.id)}}},"查看")])}}],data:[],pageSize:10,pageNum:1,total:0,viewModal:!1,viewCols:[{type:"index",title:"序号",align:"center",width:70},{title:"物品名称",align:"center",key:"name"},{title:"物品编码",align:"center",key:"code"},{title:"物品分类",align:"center",key:"classify"},{title:"品牌",align:"center",key:"brand"},{title:"规格/型号",align:"center",key:"model"},{title:"单位",align:"center",key:"unit"},{title:"数量",align:"center",key:"number"}],viewData:[],allDetail:[],msgList:[],warehouseArr:[],provideModal:!1,provideId:"",ruleValidate:{outOrder:[{required:!0,message:"不能为空",trigger:"blur"}],date:[{required:!0,type:"date",message:"不能为空",trigger:"change"}],warehouse:[{required:!0,message:"不能为空",trigger:"change"}]},saveLoading:!1,provideForm:{outOrder:"",date:"",warehouse:"",remark:""},applyDepartArr:[],goodsCols:[{type:"index",title:"序号",align:"center",width:65,key:"sortNum"},{title:"物品名称",align:"center",key:"name"},{title:"物品编码",align:"center",key:"code"},{title:"物品分类",align:"center",key:"classify"},{title:"品牌",align:"center",key:"brand"},{title:"规格/型号",align:"center",key:"model"},{title:"单位",align:"center",key:"unit"},{title:"当前库存",align:"center",key:"currentInventory",render:function(e,o){return e("div",[e("span",{class:"zd-common-primary-c zd-common-cp",on:{click:function(e){e.stopPropagation(),t.showInventoryModal(o.index)}}},o.row.currentInventory)])}},{title:"数量",align:"center",slot:"number",key:"number",renderHeader:function(t,e){return t("div",[t("span",{class:"zd-cm-required"},"数量")])}},{title:"金额",align:"center",key:"amount"}],formGoodsData:{attrData:[]},goodsIds:"",provideRemark:{remark:""},delId:"",delIndex:"",goodsName:"",outNumber:null,inventoryModal:!1,inventoryCols:[{type:"index",title:"序号",align:"center",width:65,key:"sortNum"},{title:"入库日期",align:"center",key:"date"},{title:"入库单号",align:"center",key:"orderNO",width:140},{title:"入库价格",align:"center",key:"price"},{title:"剩余数量",align:"center",key:"surplusNum"},{title:"本次出库数量",align:"center",slot:"outNum",key:"outNum"},{title:"金额",align:"center",slot:"amount",key:"amount"}],inventoryData:{attrData:[]},tmpInventory:[],subInvArr:[],departArr:[],department:"",typeArr:[],type:"",statusArr:[],status:"",orderNO:"",applyArr:[],applyPerson:"",loading:!1,date:"",selectLoading:!1}},created:function(){var t=this;this.getDepartmentBySchools(),this.getApplyKindList(),this.getApplyStatus(),this.getApplyReceiveRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.department,this.type,this.status,this.orderNO,this.applyPerson),this.getChargedStoreRoom().then(function(e){t.warehouseArr=e.data})},methods:{remoteMethod:function(t){var e=this;this.selectLeader(t).then(function(t){e.applyArr=t.data})},getDepartmentBySchools:function(){var t=this;BaseAxios({method:"post",url:"/sr/storeroomData!getDepartmentBySchools.action?operationCode=sr_warehouseManage",data:{}}).then(function(e){t.departArr=e.data}).catch(function(e){t.postErrorTip("请求失败"),console.log(e)})},getApplyKindList:function(){var t=this;BaseAxios({method:"post",url:"/sr/storeroomData!getApplyKindList.action",data:{}}).then(function(e){t.typeArr=e.data}).catch(function(e){t.postErrorTip("请求失败"),console.log(e)})},getApplyStatus:function(){var t=this;BaseAxios({method:"post",url:"/sr/storeroomData!getApplyStatus.action",data:{}}).then(function(e){e.data;t.statusArr=e.data}).catch(function(e){t.postErrorTip("请求失败"),console.log(e)})},changeSelect:function(t){var e=this;this.allSelectArr=[],t.map(function(t){e.allSelectArr.push(t.id)})},cancelSelect:function(t,e){var o=this;this.allSelectArr.map(function(t,a){t.id===e.id&&o.allSelectArr.splice(a,1)})},showViewModal:function(t){this.viewModal=!0,this.getApplyReceiveRecordProvideInfo(t)},getApplyReceiveRecordProvideInfo:function(t){var e=this;this.viewData=[],this.formGoodsData.attrData=[],this.goodsIds=[],BaseAxios({method:"post",url:"/sr/storeroomData!getApplyReceiveRecordProvideInfo.action",data:{ids:t}}).then(function(t){var o=t.data[0];e.allDetail=o,e.msgList=o.msgList,o.goodsList.map(function(t){e.viewData.push({name:t.name,code:t.code,classify:t.goodsKind,brand:t.brand,model:t.size,unit:t.unit,number:t.count,id:t.id}),e.formGoodsData.attrData.push({id:t.id,name:t.name,code:t.code,classify:t.goodsKind,brand:t.brand,model:t.size,unit:t.unit,number:t.count,currentInventory:null,amount:null,applyId:t.applyReceiveGoodsId}),e.goodsIds.push(t.id)})}).catch(function(t){e.postErrorTip("请求失败"),console.log(t)})},showProvideModal:function(t){this.provideModal=!0,this.getApplyReceiveRecordProvideInfo(t)},getCurrIndex:function(t){},validateInventory:function(t,e,o){var a=t.field.split(".")[1];e>this.formGoodsData.attrData[a].currentInventory||null===this.formGoodsData.attrData[a].currentInventory?o(new Error("库存不足")):o()},handleSummary:function(t){var e=t.columns,o=t.data,a={};return e.forEach(function(t,e){var n=t.key;if(0!==e){var r=o.map(function(t){return Number(t[n])});if(r.every(function(t){return isNaN(t)})||8!==e&&9!==e)a[n]={key:n,value:""};else{var s=r.reduce(function(t,e){var o=Number(e);return isNaN(o)?t:t+e},0);a[n]={key:n,value:s}}}else a[n]={key:n,value:"合计"}}),a},changeWarehouse:function(t){this.getInventoryByParam(this.goodsIds.join(","),t)},getInventoryByParam:function(t,e){var o=this;BaseAxios({method:"post",url:"/sr/storeroomData!getInventoryByParam.action",data:{goodsInfoIds:t,warehouseId:e}}).then(function(t){var e=t.data,a=function(t){o.formGoodsData.attrData.map(function(a){a.id===t&&o.$set(a,"currentInventory",e[t].inventory)})};for(var n in e)a(n)}).catch(function(t){o.postErrorTip("请求失败"),console.log(t)})},getGoodsList:function(t,e){var o=this;BaseAxios({method:"post",url:"/sr/storeroomData!getInventoryInfoByApplyReceiveRecordIdAndStoreroomId.action",data:{recordId:t,storeroomId:e}}).then(function(t){o.inventoryData.attrData=[];var e=t.data;if(null!==o.outNumber)for(var a=o.outNumber,n=0;n<e.length;n++){var r=null,s=e[n];s.inventory>=a?(r=a,a=0):(r=s.inventory,a-=s.inventory),o.inventoryData.attrData.push({id:s.recordGoodsId,recordKind:s.recordKind,date:s.date,orderNO:s.num,price:s.unitPrice,surplusNum:s.inventory,outNum:0===r?null:r,amount:0!==r&&null!==r?s.unitPrice*r:null})}else e.map(function(t){o.inventoryData.attrData.push({id:t.recordGoodsId,recordKind:t.recordKind,date:t.date,orderNO:t.num,price:t.unitPrice,surplusNum:t.inventory,outNum:0===t.outNum?null:t.outNum,amount:null})})}).catch(function(t){o.postErrorTip("请求失败"),console.log(t)})},showInventoryModal:function(t){var e=this;if(""!==this.provideForm.warehouse){var o=!1,a=[];if(this.addGoodsIndex=t,this.inventoryModal=!0,this.addGoodsId=this.formGoodsData.attrData[t].id,this.goodsName=this.formGoodsData.attrData[t].name,this.outNumber=this.formGoodsData.attrData[t].number,null===this.outNumber)this.tmpInventory.map(function(t,o){t.id===e.addGoodsId&&e.tmpInventory.splice(o,1)});else for(var r=JSON.parse(n()(this.tmpInventory)),s=0;s<r.length;s++)if(r[s].id===this.addGoodsId){o=!0,a=r[s].arr;break}o?this.inventoryData.attrData=a:this.getGoodsList(this.formGoodsData.attrData[t].applyId,this.provideForm.warehouse)}else this.postWarningTip("请选择出库仓库")},handleInventorySummary:function(t){var e=t.columns,o=t.data,a={};return e.forEach(function(t,e){var n=t.key;if(0!==e){var r=o.map(function(t){return Number(t[n])});if(r.every(function(t){return isNaN(t)})||4!==e&&5!==e&&6!==e)a[n]={key:n,value:""};else{var s=r.reduce(function(t,e){var o=Number(e);return isNaN(o)?t:t+e},0);a[n]={key:n,value:s}}}else a[n]={key:n,value:"合计"}}),a},cancelInventoryModal:function(){this.inventoryModal=!1,this.$refs.inventoryData.resetFields()},confirmInventoryModal:function(){for(var t=this,e=this.inventoryData.attrData,o=!1,a=0;a<e.length;a++)if(null!==e[a].outNum){o=!0;break}if(o){this.tmpInventory.map(function(e,o){e.id===t.addGoodsId&&t.tmpInventory.splice(o,1)}),this.tmpInventory.push({id:this.addGoodsId,arr:e});var n=null;e.map(function(t){n+=t.outNum}),this.formGoodsData.attrData[this.addGoodsIndex].number=n}else this.formGoodsData.attrData[this.addGoodsIndex].number=null,this.tmpInventory.map(function(e,o){e.id===t.addGoodsId&&t.tmpInventory.splice(o,1)});this.getCurrIndex(this.addGoodsIndex),this.inventoryModal=!1},calcAmount:function(t){this.inventoryData.attrData[t].amount=this.inventoryData.attrData[t].price*this.inventoryData.attrData[t].outNum},clickRowHandle:function(t,e){window.event.stopPropagation(),this.delId===t.id?(this.delId="",this.delIndex=""):(this.delId=t.id,this.delIndex=e)},rowClassName:function(t,e){return this.delId===t.id?"demo-table-info-row":""},delRowHandle:function(){return""===this.delIndex?this.postWarningTip("请选择删除的物品"):this.formGoodsData.attrData.length<=1?this.postWarningTip("至少保留一个物品"):void this.formGoodsData.attrData.splice(this.delIndex,1)},handleSubmit:function(){var t=!1,e=!1;if(this.$refs.provideForm.validate(function(e){e&&(t=!0)}),this.$refs.formGoodsData.validate(function(t){t&&(e=!0)}),t&&e){this.saveLoading=!0;var o=new Date(this.provideForm.date),a=o.getFullYear()+"-"+this.fillZero(o.getMonth()+1)+"-"+this.fillZero(o.getDate());this.saveApplyReceiveRecordProvide(a,this.provideForm.warehouse,this.provideId,this.provideRemarkForm.remark,this.formGoodsData.attrData)}},saveApplyReceiveRecordProvide:function(t,e,o,a,n){var r=this,s=!0,i=!0,d={};this.subInvArr=[],d["applyReceiveRecordProvideVOs.date"]=t,d["applyReceiveRecordProvideVOs.storeroomId"]=e,d["applyReceiveRecordProvideVOs.recordId"]=o,d["applyReceiveRecordProvideVOs.note"]=n,this.tmpInventory.length>0?(s=!1,this.tmpInventory.map(function(t){a.map(function(e,o){e.id===t.id?t.arr.map(function(t){null!==t.outNum&&r.subInvArr.push({id:t.id,recordKind:t.recordKind,outNum:t.outNum})}):r.getGoodsList(e.id,r.provideForm.warehouse).then(function(t){var o=t.data;if(null!==e.number){var a=e.number;o.map(function(t){var e=null;t.inventory>=a?(e=a,a=0):(e=t.inventory,a-=t.inventory),r.subInvArr.push({id:t.recordGoodsId,recordKind:t.recordKind,outNum:0===e?null:e})})}r.subInvArr.map(function(t,e){null!==t.outNum&&(d["outGoodsVOs["+e+"].recordGoodsId"]=t.id,d["outGoodsVOs["+e+"].count"]=t.outNum,d["outGoodsVOs["+e+"].recordKind"]=t.recordKind)})}),o===a.length-1&&(s=!0)})})):(i=!1,a.map(function(t,e){r.getGoodsList(t.id,r.provideForm.warehouse).then(function(e){var o=e.data;if(null!==t.number){var a=t.number;o.map(function(t){var e=null;t.inventory>=a?(e=a,a=0):(e=t.inventory,a-=t.inventory),r.subInvArr.push({id:t.recordGoodsId,recordKind:t.recordKind,outNum:0===e?null:e})})}r.subInvArr.map(function(t,e){null!==t.outNum&&(d["outGoodsVOs["+e+"].recordGoodsId"]=t.id,d["outGoodsVOs["+e+"].count"]=t.outNum,d["outGoodsVOs["+e+"].recordKind"]=t.recordKind)})}),e===a.length-1&&(i=!0)})),s&&i&&setTimeout(function(){BaseAxios({method:"post",url:"/sr/storeroomData!saveApplyReceiveRecordProvide.action",data:d}).then(function(t){r.saveLoading=!1,r.provideModal=!1}).catch(function(t){r.saveLoading=!1,r.provideModal=!1,r.postErrorTip("请求失败"),console.log(t)})},500)},getApplyReceiveRecordPage:function(t,e,o,a,n,r,s,i,d){var l=this;this.data=[],BaseAxios({method:"post",url:"/sr/storeroomData!getApplyReceiveRecordProvidePage.action?operationCode=sr_warehouseManage",data:{pageNum:t,pageSize:e,startDate:o,endDate:a,departmentId:n,kind:r,status:s,num:i,userId:d}}).then(function(t){var e=t.data;e&&e.list.length>0&&e.list.map(function(t){l.data.push({id:t.id,applyNum:t.num,applyDepart:t.department,applyDate:t.date,applyType:t.kindName,applyPerson:t.userName,goodsNum:t.goodsNum,status:t.statusName})}),l.total=e.totalCount,l.selectLoading=!1}).catch(function(t){l.selectLoading=!1,l.postErrorTip("请求失败"),console.log(t)})},changePage:function(t){this.pageNum=t,this.getApplyReceiveRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.department,this.type,this.status,this.orderNO,this.applyPerson)},changePageSize:function(t){this.pageSize=t,this.getApplyReceiveRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.department,this.type,this.status,this.orderNO,this.applyPerson)},selectHandle:function(){this.selectLoading=!0,this.getApplyReceiveRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.department,this.type,this.status,this.orderNO,this.applyPerson)}},mounted:function(){this.calcWidth()}}),s=o("W5g0");var i=function(t){o("XuB5")},d=Object(s.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"zd-common-component"},[o("div",{staticClass:"zd-common-clearFix"},[o("div",{staticClass:"zd-common-fr zd-cm-res-fr"},[o("Input",{staticClass:"zd-common-input-h38 zd-common-w150 zd-common-fl zd-common-mr10",attrs:{maxlength:50,placeholder:"申领单号"},model:{value:t.orderNO,callback:function(e){t.orderNO=e},expression:"orderNO"}}),t._v(" "),o("Select",{staticClass:"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10",attrs:{placeholder:"全部申领部门",clearable:""},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}},t._l(t.departArr,function(e){return o("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1),t._v(" "),o("Select",{staticClass:"zd-common-input-h38 zd-common-w150 zd-common-fl zd-common-mr10",attrs:{placeholder:"全部领用类型",clearable:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.typeArr,function(e){return o("Option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.name))])}),1),t._v(" "),o("Select",{staticClass:"zd-common-input-h38 zd-common-w150 zd-common-fl zd-common-mr10",attrs:{placeholder:"全部审核状态",clearable:""},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusArr,function(e){return o("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1),t._v(" "),o("Select",{ref:"leader",staticClass:"zd-common-input-h38 zd-common-w150 zd-common-fl zd-common-mr10",attrs:{placeholder:"申领人",filterable:"",remote:"","remote-method":t.remoteMethod,loading:t.loading},model:{value:t.applyPerson,callback:function(e){t.applyPerson=e},expression:"applyPerson"}},t._l(t.applyArr,function(e){return o("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1),t._v(" "),o("DatePicker",{staticClass:"zd-common-input-h38 zd-common-w150 zd-common-fl zd-common-mr10",attrs:{editable:!1,type:"date",placeholder:"日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),o("Button",{staticClass:"zd-common-fl",attrs:{type:"primary",loading:t.selectLoading},on:{click:t.selectHandle}},[t.selectLoading?o("span",[t._v("正在查询...")]):o("span",[t._v("查询")])])],1)]),t._v(" "),o("div",{staticClass:"zd-common-mt16"},[o("Table",{attrs:{border:"",columns:t.columns,data:t.data,"row-class-name":t.rowClassName}}),t._v(" "),o("div",{staticClass:"zd-common-tc zd-common-mt20"},[o("Page",{attrs:{total:t.total,current:t.pageNum,"page-size":t.pageSize,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1),t._v(" "),o("Modal",{attrs:{"mask-closable":!1,width:1200},model:{value:t.provideModal,callback:function(e){t.provideModal=e},expression:"provideModal"}},[o("h3",{staticClass:"zd-common-modal-header",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("物品发放")])]),t._v(" "),o("div",{staticClass:"zd-common-h400"},[o("vue-scroll",[o("div",{staticClass:"zd-common-pr20"},[o("Form",{ref:"provideForm",staticClass:"zd-cm-applyForm",attrs:{model:t.provideForm,rules:t.ruleValidate,"label-width":85,inline:""}},[o("FormItem",{attrs:{label:"出库日期：",prop:"date"}},[o("DatePicker",{staticClass:"zd-common-w150 zd-common-mr10",attrs:{editable:!1,type:"date",placeholder:"出库日期"},model:{value:t.provideForm.date,callback:function(e){t.$set(t.provideForm,"date",e)},expression:"provideForm.date"}})],1),t._v(" "),o("FormItem",{attrs:{label:"出库仓库：",prop:"warehouse"}},[o("Select",{staticClass:"zd-common-w200",attrs:{clearable:"",placeholder:"选择出库仓库"},on:{"on-change":t.changeWarehouse},model:{value:t.provideForm.warehouse,callback:function(e){t.$set(t.provideForm,"warehouse",e)},expression:"provideForm.warehouse"}},t._l(t.warehouseArr,function(e){return o("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),o("div",{staticClass:"zd-common-clearFix"},[o("span",{staticClass:"zd-common-fl zd-common-mr14"},[t._v("出库单号："),o("span",{staticClass:"zd-common-font-weight"},[t._v(t._s(t.allDetail.num))])]),t._v(" "),o("span",{staticClass:"zd-common-fl zd-common-mr14"},[t._v("出库类型："),o("span",{staticClass:"zd-common-font-weight"},[t._v(t._s(t.allDetail.kindName))])]),t._v(" "),o("span",{staticClass:"zd-common-fl zd-common-mr14"},[t._v("部门："),o("span",{staticClass:"zd-common-font-weight"},[t._v(t._s(t.allDetail.departmentName))])]),t._v(" "),o("span",{staticClass:"zd-common-fl zd-common-mr14"},[t._v("领用人："),o("span",{staticClass:"zd-common-font-weight"},[t._v(t._s(t.allDetail.userName))])])]),t._v(" "),o("div",{staticClass:"zd-common-black-b zd-common-pt5 zd-common-pb5 zd-common-pl20 zd-common-mt5"},[o("Button",{staticClass:"zd-common-mr10 zd-common-h32 zd-common-lh8",attrs:{type:"default"},on:{click:t.delRowHandle}},[t._v("\n              删除\n            ")])],1),t._v(" "),o("Form",{ref:"formGoodsData",staticClass:"zd-common-mt10",attrs:{model:t.formGoodsData}},[o("Table",{attrs:{border:"",columns:t.goodsCols,data:t.formGoodsData.attrData,"show-summary":"","summary-method":t.handleSummary,"row-class-name":t.rowClassName},on:{"on-row-click":t.clickRowHandle},scopedSlots:t._u([{key:"number",fn:function(e){e.row;var a=e.index;return[o("Form-item",{staticClass:"zd-common-mt24",attrs:{prop:"attrData."+a+".number",rules:{required:!0,type:"number",validator:t.validateInventory,trigger:"blur"}}},[o("InputNumber",{staticClass:"zd-common-wp100",attrs:{max:t.formGoodsData.attrData[a].currentInventory,min:1,precision:0,placeholder:"数量"},on:{"on-change":function(e){return t.getCurrIndex(a)}},model:{value:t.formGoodsData.attrData[a].number,callback:function(e){t.$set(t.formGoodsData.attrData[a],"number",e)},expression:"formGoodsData.attrData[index].number"}})],1)]}}])})],1),t._v(" "),o("div",{staticClass:"zd-common-mt10 zd-common-clearFix"},[o("span",{staticClass:"zd-common-fl"},[t._v("申领人："+t._s(t.allDetail.userName))]),t._v(" "),o("span",{staticClass:"zd-common-fl zd-common-ml20"},[t._v("申领日期："+t._s(t.allDetail.date))])]),t._v(" "),o("Form",{ref:"provideRemark",staticClass:"zd-common-mt20",attrs:{model:t.provideRemark}},[o("FormItem",{staticClass:"zd-common-mb0",attrs:{label:"备注："}},[o("Input",{staticClass:"zd-common-fl",staticStyle:{width:"826px"},attrs:{placeholder:"备注",maxlength:100,type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.provideRemark.remark,callback:function(e){t.$set(t.provideRemark,"remark","string"==typeof e?e.trim():e)},expression:"provideRemark.remark"}})],1)],1)],1)])],1),t._v(" "),o("div",{staticClass:"zd-common-modal-footer zd-common-pt10",attrs:{slot:"footer"},slot:"footer"},[o("Button",{staticClass:"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8",attrs:{type:"primary",loading:t.saveLoading},on:{click:t.handleSubmit}},[t.saveLoading?o("span",[t._v("正在保存...")]):o("span",[t._v("确定")])]),t._v(" "),o("Button",{staticClass:"zd-common-w100 zd-common-h32 zd-common-lh8",on:{click:function(e){t.provideModal=!1}}},[t._v("取消")])],1)]),t._v(" "),o("Modal",{attrs:{"mask-closable":!1,width:920,closable:!1},on:{"on-cancel":t.cancelInventoryModal},model:{value:t.inventoryModal,callback:function(e){t.inventoryModal=e},expression:"inventoryModal"}},[o("h3",{staticClass:"zd-common-modal-header",attrs:{slot:"header"},slot:"header"},[o("span",[t._v(t._s(t.goodsName))]),t._v(" "),o("i",{staticClass:"zd-common-fs12 zd-common-font-style zd-common-des-font-c zd-common-fr"},[t._v("系统默认按照先入先出的原则自动分配出库数量")])]),t._v(" "),o("div",{staticClass:"zd-common-h400"},[o("vue-scroll",[o("Form",{ref:"inventoryData",attrs:{model:t.inventoryData}},[o("Table",{staticClass:"zd-common-overflow-v zd-cm-out-table",attrs:{border:"",columns:t.inventoryCols,data:t.inventoryData.attrData,"show-summary":"","summary-method":t.handleInventorySummary},scopedSlots:t._u([{key:"outNum",fn:function(e){e.row;var a=e.index;return t.inventoryData.attrData[a].surplusNum>0?[o("Form-item",{staticClass:"zd-common-mt24"},[o("InputNumber",{attrs:{max:t.inventoryData.attrData[a].surplusNum,min:1,precision:0,placeholder:"数量"},on:{"on-change":function(e){return t.calcAmount(a)}},model:{value:t.inventoryData.attrData[a].outNum,callback:function(e){t.$set(t.inventoryData.attrData[a],"outNum",e)},expression:"inventoryData.attrData[index].outNum"}})],1)]:void 0}},{key:"amount",fn:function(e){e.row;var o=e.index;return[t._v("\n              "+t._s(t.inventoryData.attrData[o].amount)+"\n            ")]}}],null,!0)})],1)],1)],1),t._v(" "),o("div",{staticClass:"zd-common-modal-footer zd-common-pt10",attrs:{slot:"footer"},slot:"footer"},[o("Button",{staticClass:"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8",attrs:{type:"primary"},on:{click:t.confirmInventoryModal}},[t._v("确定")]),t._v(" "),o("Button",{staticClass:"zd-common-w100 zd-common-h32 zd-common-lh8",on:{click:t.cancelInventoryModal}},[t._v("取消")])],1)]),t._v(" "),o("Modal",{attrs:{"mask-closable":!1,width:920},model:{value:t.viewModal,callback:function(e){t.viewModal=e},expression:"viewModal"}},[o("h3",{staticClass:"zd-common-modal-header",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("查看申领单")])]),t._v(" "),o("div",{staticClass:"zd-common-h400"},[o("vue-scroll",[o("div",{staticClass:"zd-common-pr20"},[t.msgList.length>0?o("div",{staticClass:"zd-common-h100 zd-common-border-radius6 zd-cm-process zd-common-mb20"},[o("vue-scroll",[o("div",{staticClass:"zd-cm-step zd-common-clearFix"},[t._l(t.msgList,function(e,a){return[o("div",{staticClass:"zd-cur-step zd-common-fl zd-common-ml20 zd-common-mt29"},[o("p",[t._v(t._s(e.time))]),t._v(" "),o("p",[t._v(t._s(e.userName)+"："+t._s(e.status))])]),t._v(" "),a!==t.msgList.length-1?o("div",{staticClass:"zd-cur-step zd-common-fl zd-common-ml20 zd-common-lh100"},[o("Icon",{attrs:{type:"ios-arrow-forward"}})],1):t._e()]})],2)])],1):t._e(),t._v(" "),o("div",{staticClass:"zd-common-clearFix"},[o("span",{staticClass:"zd-common-fl zd-common-mr14"},[t._v("申领单号："),o("span",{staticClass:"zd-common-font-weight"},[t._v(t._s(t.allDetail.num))])]),t._v(" "),o("span",{staticClass:"zd-common-fl zd-common-mr14"},[t._v("申领日期："),o("span",{staticClass:"zd-common-font-weight"},[t._v(t._s(t.allDetail.date))])]),t._v(" "),o("span",{staticClass:"zd-common-fl zd-common-mr14"},[t._v("申领人："),o("span",{staticClass:"zd-common-font-weight"},[t._v(t._s(t.allDetail.userName))])]),t._v(" "),o("span",{staticClass:"zd-common-fl zd-common-mr14"},[t._v("申领部门："),o("span",{staticClass:"zd-common-font-weight"},[t._v(t._s(t.allDetail.departmentName))])]),t._v(" "),t.allDetail.deptCheckName?o("span",{staticClass:"zd-common-fl zd-common-mr14"},[t._v("部门审核人："),o("span",{staticClass:"zd-common-font-weight"},[t._v(t._s(t.allDetail.deptCheckName))])]):t._e(),t._v(" "),o("span",{staticClass:"zd-common-fl zd-common-mr14"},[t._v("领用类型："),o("span",{staticClass:"zd-common-font-weight"},[t._v(t._s(t.allDetail.kindName))])])]),t._v(" "),o("Table",{staticClass:"zd-common-mt10",attrs:{border:"",columns:t.viewCols,data:t.viewData,"show-summary":""}}),t._v(" "),o("div",{staticClass:"zd-common-mt10 zd-common-clearFix"},[o("span",{staticClass:"zd-common-clearFix"},[o("span",{staticClass:"zd-common-fl"},[t._v("申领原因：")]),t._v(" "),o("span",{staticClass:"zd-common-fl zd-cm-applyReason"},[t._v(t._s(t.allDetail.reason))])])]),t._v(" "),o("div",{staticClass:"zd-common-mt10 zd-common-clearFix"},[o("span",{staticClass:"zd-common-clearFix"},[o("span",{staticClass:"zd-common-fl"},[t._v("部门审核意见：")]),t._v(" "),o("span",{staticClass:"zd-common-fl zd-cm-applyReason"},[t._v(t._s(t.allDetail.deptOpinion))])])]),t._v(" "),o("div",{staticClass:"zd-common-mt10 zd-common-clearFix"},[o("span",{staticClass:"zd-common-clearFix"},[o("span",{staticClass:"zd-common-fl"},[t._v("总务审核意见：")]),t._v(" "),o("span",{staticClass:"zd-common-fl zd-cm-applyReason"},[t._v(t._s(t.allDetail.zwOpinion))])])])],1)])],1),t._v(" "),o("div",{staticClass:"zd-common-modal-footer no-print",attrs:{slot:"footer"},slot:"footer"},[o("Button",{staticClass:"zd-common-w100 zd-common-h32 zd-common-lh8",on:{click:function(e){t.viewModal=!1}}},[t._v("取消")])],1)])],1)},[],!1,i,"data-v-54433b0e",null);e.default=d.exports}});
//# sourceMappingURL=26.d4894e9d1c31032e32d8.js.map