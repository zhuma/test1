webpackJsonp([16],{AiyH:function(t,e){},"lMo+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("fYFQ"),o=n.n(a),s=(n("Kmkn"),{components:{Treeselect:o.a},data:function(){return{columns:[{type:"index",align:"center",title:"序号",width:65},{title:"物品名称",align:"center",key:"name"},{title:"物品编码",align:"center",key:"code"},{title:"物品类别",align:"center",key:"classify"},{title:"品牌",align:"center",key:"brand"},{title:"规格/型号",align:"center",key:"model"},{title:"单位",align:"center",key:"unit"},{title:"最高库存",align:"center",key:"maxInventory"},{title:"最低库存",align:"center",key:"minInventory"},{title:"现存量",align:"center",key:"standingStock",render:function(t,e){return e.row.standingStock>e.row.maxInventory?t("div",[t("span",{class:"zd-common-error-c"},e.row.standingStock)]):e.row.standingStock<e.row.minInventory?t("div",[t("span",{class:"zd-common-success-c"},e.row.standingStock)]):t("div",[t("span",{},e.row.standingStock)])}},{title:"状态",align:"center",key:"status",render:function(t,e){return e.row.standingStock>e.row.maxInventory?t("div",[t("span",{class:"zd-common-error-c"},e.row.status)]):e.row.standingStock<e.row.minInventory?t("div",[t("span",{class:"zd-common-success-c"},e.row.status)]):t("div",[t("span",{},e.row.status)])}}],data:[],pageSize:10,pageNum:1,total:0,selectLoading:!1,dateOptions:this.dateRange,warehouseArr:[],warehouse:"",type:null,typeIdArr:[],status:"",name:"",treeOptions:[],normalizer:function(t){return{id:t.id,label:t.name,children:t.children}}}},created:function(){var t=this;this.getChargedStoreRoom().then(function(e){t.warehouseArr=e.data}),this.warningStatistics(this.warehouse,this.typeIdArr.join(","),this.status,this.name),this.getKind()},methods:{onSelect:function(t,e){this.typeIdArr=t},getKind:function(){var t=this;this.treeOptions=[],this.getGoodsKindTree().then(function(e){t.treeOptions=e.data})},warningStatistics:function(t,e,n,a){var o=this;this.data=[],BaseAxios({method:"post",url:"/sr/storeroomData!warningStatistics.action",data:{warehouseIds:t,goodsKindIds:e,status:n,goodsName:a}}).then(function(t){var e=t.data;e&&e.length>0&&e.map(function(t){o.data.push({id:t.id,name:t.name,code:t.code,classify:t.goodsKindName,brand:t.brand,model:t.size,unit:t.unit,maxInventory:t.max,minInventory:t.min,standingStock:t.inventory,status:t.statusName})}),o.total=e.totalRecord,o.selectLoading=!1}).catch(function(t){o.selectLoading=!1,o.postErrorTip("请求失败"),console.log(t)})},changePage:function(t){this.pageNum=t,this.warningStatistics(this.warehouse,this.typeIdArr.join(","),this.status,this.name)},changePageSize:function(t){this.pageSize=t,this.warningStatistics(this.warehouse,this.typeIdArr.join(","),this.status,this.name)},selectHandle:function(){this.selectLoading=!0,this.warningStatistics(this.warehouse,this.typeIdArr.join(","),this.status,this.name)},exportHandle:function(){location.href=this.serverPath+"/sr/storeroomData!exportWarningStatistics.action?warehouseIds="+this.warehouse+"&goodsKindIds="+this.typeIdArr.join(",")+"&status="+this.status+"&goodsName="+this.name}},mounted:function(){}}),i=n("W5g0");var r=function(t){n("AiyH")},c=Object(i.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zd-common-component"},[n("div",{staticClass:"zd-common-clearFix"},[n("Button",{staticClass:"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10",attrs:{type:"primary"},on:{click:t.exportHandle}},[n("Icon",{staticClass:"zd-common-fs18 zd-common-mr5 zd-common-fl",attrs:{type:"ios-open-outline"}}),t._v("导出\n    ")],1),t._v(" "),n("div",{staticClass:"zd-common-fr"},[n("Select",{staticClass:"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10",attrs:{clearable:!0,placeholder:"全部仓库"},model:{value:t.warehouse,callback:function(e){t.warehouse=e},expression:"warehouse"}},t._l(t.warehouseArr,function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1),t._v(" "),n("div",{staticClass:"zd-cm-tree zd-common-w300 zd-common-fl zd-common-mr10"},[n("treeselect",{staticStyle:{height:"38px"},attrs:{multiple:!0,options:t.treeOptions,normalizer:t.normalizer,limit:2,limitText:t.limitHandle,noOptionsText:"暂无数据",clearable:!1,placeholder:"选择物品分类"},on:{close:t.onSelect},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),t._v(" "),n("Select",{staticClass:"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10",attrs:{placeholder:"全部状态",clearable:!0},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[n("Option",{attrs:{value:"0"}},[t._v("库存不足")]),t._v(" "),n("Option",{attrs:{value:"1"}},[t._v("库存超出")])],1),t._v(" "),n("Input",{staticClass:"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10",attrs:{maxlength:50,placeholder:"物品名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("Button",{staticClass:"zd-common-fl",attrs:{type:"primary",loading:t.selectLoading},on:{click:t.selectHandle}},[t.selectLoading?n("span",[t._v("正在查询...")]):n("span",[t._v("查询")])])],1)],1),t._v(" "),n("div",{staticClass:"zd-common-mt16"},[n("Table",{ref:"currentRowTable",attrs:{border:"",columns:t.columns,data:t.data}})],1)])},[],!1,r,"data-v-cae207de",null);e.default=c.exports}});
//# sourceMappingURL=16.8a64e0b1992ed57f7032.js.map