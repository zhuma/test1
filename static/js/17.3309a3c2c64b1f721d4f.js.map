{"version":3,"sources":["webpack:///src/consumablesManage/views/consumablesManage/check.vue","webpack:///./src/consumablesManage/views/consumablesManage/check.vue","webpack:///./src/consumablesManage/views/consumablesManage/check.vue?f17d"],"names":["check","data","_this","this","columns","type","align","title","width","key","renderHeader","h","params","props","content","max-width","size","render","ghost","style","height","padding","marginRight","on","click","toCheckOrder","row","id","showAddCheck","index","showDelModal","pageSize","pageNum","total","addCheckModal","warehouseArr","date","checkForm","name","warehouse","ruleValidate","required","message","trigger","saveLoading","modalTitle","editId","storeRoomName","userName","delModal","deleteForm","reason","delId","dateOptions","dateRange","orderNO","startDate","endDate","selectLoading","created","_this2","getChargedStoreRoom","then","response","e","Date","getFullYear","fillZero","getMonth","getDate","getInventoryRecordPage","$store","dispatch","methods","changeDate","arr","getEditInfo","orderPerson","orderDate","$refs","resetFields","saveOrUpdateInventoryRecord","warehouseIds","_this3","BaseAxios","method","url","catch","error","postErrorTip","console","log","handleSubmit","_this4","validate","valid","join","_this5","aData","handleDelSubmit","deleteInventoryRecord","deleteCause","_this6","$router","push","path","num","_this7","list","length","map","item","warehouseNum","storeroomInfo","checkNumber","storeroomGoodsInfo","lossNumber","storeroomGoodsInfoDetail","totalCount","changePage","changePageSize","selectHandle","mounted","__vue_styles__","context","__webpack_require__","Component","Object","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","custom-icon","$event","_v","editable","options","placeholder","on-change","maxlength","model","value","callback","$$v","expression","loading","ref","border","current","page-size","show-sizer","show-elevator","show-total","on-page-size-change","mask-closable","slot","_s","rules","label-width","label","prop","$set","trim","multiple","_l","show-icon","autosize","minRows","maxRows","__webpack_exports__"],"mappings":"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","file":"static/js/17.3309a3c2c64b1f721d4f.js","sourcesContent":["<template>\n  <div class=\"zd-common-component\">\n    <div class=\"zd-common-clearFix\">\n      <Button type=\"primary\" class=\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10\" custom-icon=\"zd-common-icon-add\" @click=\"showAddCheck('add','','')\">\n        盘点单\n      </Button>\n      <div class=\"zd-common-fr\">\n        <DatePicker :editable=\"false\" type=\"daterange\" :options=\"dateOptions\" placeholder=\"日期\" class=\"zd-common-input-h38 zd-common-fl zd-common-mr10 zd-cm-w220\" @on-change=\"changeDate\"></DatePicker>\n        <Input v-model=\"orderNO\" :maxlength=\"50\" placeholder=\"盘点单号\" class=\"zd-common-input-h38 zd-common-w150 zd-common-fl zd-common-mr10\"/>\n        <Button type=\"primary\" class=\"zd-common-fl\" @click=\"selectHandle\" :loading=\"selectLoading\">\n          <span v-if=\"!selectLoading\">查询</span>\n          <span v-else>正在查询...</span>\n        </Button>\n      </div>\n    </div>\n    <div class=\"zd-common-mt16\">\n      <Table class=\"checkTable\" ref=\"currentRowTable\" border :columns=\"columns\" :data=\"data\"></Table>\n      <div class=\"zd-common-tc zd-common-mt20\">\n        <Page :total=\"total\" :current=\"pageNum\" :page-size=\"pageSize\" @on-change=\"changePage\" @on-page-size-change=\"changePageSize\" show-sizer show-elevator show-total></Page>\n      </div>\n    </div>\n    <!--添加/修改盘点单-->\n    <Modal v-model=\"addCheckModal\" :mask-closable=\"false\">\n      <h3 slot=\"header\" class=\"zd-common-modal-header\">\n        <span>{{ modalTitle }}</span>\n      </h3>\n      <Form ref=\"checkForm\" :model=\"checkForm\" :rules=\"ruleValidate\" :label-width=\"100\">\n        <FormItem label=\"名称：\"  prop=\"name\">\n          <Input v-model.trim=\"checkForm.name\" placeholder=\"请输入盘点名称\" :maxlength=\"30\" class=\"zd-common-w300\"></Input>\n        </FormItem>\n        <!--<FormItem label=\"盘点单号：\"  prop=\"orderNO\">\n          <Input v-model.trim=\"checkForm.orderNO\" placeholder=\"请输入盘点单号\" :maxlength=\"30\" class=\"zd-common-w300\"></Input>\n        </FormItem>-->\n        <FormItem v-if=\"editId === ''\" label=\"盘点仓库：\"  prop=\"warehouse\">\n          <Select v-model=\"checkForm.warehouse\" multiple placeholder=\"请选择盘点仓库\" class=\"zd-common-w300\">\n            <Option v-for=\"item in warehouseArr\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n          </Select>\n        </FormItem>\n        <p v-else class=\"zd-common-mt24 zd-common-mb24\"><span class=\"zd-common-w100 zd-common-dib zd-common-tr zd-common-pr12\">盘点仓库：</span>{{ storeRoomName }}</p>\n        <p class=\"zd-common-mt24 zd-common-mb24\"><span class=\"zd-common-w100 zd-common-dib zd-common-tr zd-common-pr12\">制单人：</span>{{ userName }}</p>\n        <p class=\"zd-common-mt24 zd-common-mb24\"><span class=\"zd-common-w100 zd-common-dib zd-common-tr zd-common-pr12\">制单日期：</span>{{ date }}</p>\n      </Form>\n      <div slot=\"footer\" class=\"zd-common-modal-footer zd-common-pt10\">\n        <Button type=\"primary\" class=\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\" @click=\"handleSubmit('checkForm')\"\n                :loading=\"saveLoading\">\n          <span v-if=\"!saveLoading\">确定</span>\n          <span v-else>正在保存...</span>\n        </Button>\n        <Button @click=\"addCheckModal = false\" class=\"zd-common-w100 zd-common-h32 zd-common-lh8\">取消</Button>\n      </div>\n    </Modal>\n    <!--删除-->\n    <Modal v-model=\"delModal\" :mask-closable=\"false\" :width=\"590\">\n      <h3 slot=\"header\" class=\"zd-common-modal-header\">\n        <span>删除入库单</span>\n      </h3>\n      <Alert type=\"warning\" show-icon class=\"zd-common-warning-c\">是否确认删除？</Alert>\n      <Form ref=\"deleteForm\" :model=\"deleteForm\">\n        <FormItem label=\"删除原因：\" class=\"zd-common-mb0\">\n          <Input class=\"zd-common-fl\" v-model.trim=\"deleteForm.reason\" placeholder=\"\" :maxlength=\"100\" type=\"textarea\" :autosize=\"{minRows: 3,maxRows: 3}\"></Input>\n        </FormItem>\n      </Form>\n      <div slot=\"footer\" class=\"zd-common-modal-footer zd-common-pt10\">\n        <Button type=\"primary\" class=\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\" @click=\"handleDelSubmit\" :loading=\"saveLoading\">\n          <span v-if=\"!saveLoading\">确定</span>\n          <span v-else>正在保存...</span>\n        </Button>\n        <Button @click=\"delModal = false\" class=\"zd-common-w100 zd-common-h32 zd-common-lh8\">取消</Button>\n      </div>\n    </Modal>\n\n  </div>\n</template>\n<script>\n  import { utils } from '@comm/script/utils/index'\n  export default {\n    data() {\n      return {\n        //列表\n        columns: [\n          {\n            type: 'index',\n            align: 'center',\n            title: '序号',\n            width:65\n          },\n          {\n            title: '名称',\n            align: 'center',\n            key: 'name'\n          },\n          {\n            title: '盘点单号',\n            align: 'center',\n            key: 'orderNO'\n          },\n          {\n            title: '仓库数量',\n            align: 'center',\n            key: 'warehouseNum',\n            renderHeader:(h,params)=>{\n              return h('div', [\n                h('span', {},'仓库数量'),\n                h('Tooltip', {\n                  props: {\n                    content:'已盘点完成仓库数量 / 需盘点仓库总数量',\n                    'max-width':300\n                  },\n                },[\n                  h('Icon', {\n                    props:{\n                      type:'ios-help-circle',\n                      size:16\n                    }\n                  })\n                ])\n              ])\n            },\n          },\n          {\n            title: '盘点物品数量',\n            align: 'center',\n            key: 'checkNumber',\n            renderHeader:(h,params)=>{\n              return h('div', [\n                h('span', {},'盘点物品数量'),\n                h('Tooltip', {\n                  props: {\n                    content:'已盘点物品数量 / 物品总量',\n                    'max-width':300\n                  },\n                },[\n                  h('Icon', {\n                    props:{\n                      type:'ios-help-circle',\n                      size:16\n                    }\n                  })\n                ])\n              ])\n            },\n          },\n          {\n            title: '盈亏物品数量',\n            align: 'center',\n            key: 'lossNumber',\n            renderHeader:(h,params)=>{\n              return h('div', [\n                h('span', {},'盈亏物品数量'),\n                h('Tooltip', {\n                  props: {\n                    content:'盘盈物品数量 / 盘亏物品数量',\n                    'max-width':300\n                  },\n                },[\n                  h('Icon', {\n                    props:{\n                      type:'ios-help-circle',\n                      size:16\n                    }\n                  })\n                ])\n              ])\n            },\n          },\n          {\n            title: '制单人',\n            align: 'center',\n            key: 'orderPerson',\n          },\n          {\n            title: '制单日期',\n            align: 'center',\n            key: 'orderDate',\n          },\n          {\n            title: '操作',\n            align: 'center',\n            key: 'action',\n            width:230,\n            render: (h, params) => {\n              return h('div', [\n                h('Button', {\n                  props:{\n                    type:'primary',\n                    ghost:true,\n                  },\n                  style: {\n                    height: \"28px\",\n                    padding:'0 15px 1px',\n                    marginRight:'10px'\n                  },\n                  on: {\n                    click: () => {\n                      this.toCheckOrder(params.row.id);\n                    }\n                  }\n                }, '盘点'),\n                h('Button', {\n                  props:{\n                    type:'primary',\n                    ghost:true,\n                  },\n                  style: {\n                    height: \"28px\",\n                    padding:'0 15px 1px',\n                    marginRight:'10px'\n                  },\n                  on: {\n                    click: () => {\n                      this.showAddCheck('edit',params.row.id,params.index);\n                    }\n                  }\n                }, '修改'),\n                h('Button', {\n                  props:{\n                    type:'error',\n                    ghost:true,\n                  },\n                  style: {\n                    height: \"28px\",\n                    padding:'0 15px 1px'\n                  },\n                  on: {\n                    click: () => {\n                      this.showDelModal(params.row.id);\n                    }\n                  }\n                }, '删除')\n              ]);\n            }\n          }\n        ],\n        data: [],\n        pageSize:10,\n        pageNum:1,\n        total:0,\n        //添加/修改盘点单\n        addCheckModal:false,\n        warehouseArr:[],\n        date:'',\n        checkForm:{\n          name:'',\n          warehouse:[],\n        },\n        ruleValidate: {\n          name: [\n            { required: true, message:'不能为空', trigger: 'blur' }\n          ],\n          warehouse: [\n            { required: true, type:'array', message:'不能为空', trigger: 'change' }\n          ],\n        },\n        saveLoading:false,\n        modalTitle:'添加盘点单',\n        editId:'',\n        storeRoomName:'',\n        userName:'',\n        //删除\n        delModal:false,\n        deleteForm:{\n          reason:''\n        },\n        delId:'',\n        //查询\n        dateOptions: this.dateRange,\n        orderNO:'',\n        startDate:'',\n        endDate:'',\n        selectLoading:false\n      }\n    },\n    created(){\n      this.getChargedStoreRoom().then((response)=>{\n        this.warehouseArr = response.data;\n      });\n      const e = new Date();\n      this.date = e.getFullYear() +\"-\"+ this.fillZero(e.getMonth()+1) +\"-\"+ this.fillZero(e.getDate());\n      this.getInventoryRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.orderNO);\n      this.$store.dispatch('getBaseInfo').then((response)=>{\n        this.userName = response.userName;\n      })\n    },\n    methods: {\n      //日期\n      changeDate(arr){\n        this.startDate = arr[0];\n        this.endDate = arr[1];\n      },\n      //添加盘点单\n      showAddCheck(type,id,index){\n        if(type === 'edit'){\n          this.modalTitle = '修改盘点单';\n          this.getEditInfo(id);\n          this.checkForm.name = this.data[index].name;\n          this.userName = this.data[index].orderPerson;\n          this.date = this.data[index].orderDate;\n        }else{\n          this.modalTitle = '添加盘点单';\n          this.$refs['checkForm'].resetFields();\n        }\n        this.editId = id;\n        this.addCheckModal = true;\n      },\n      //保存\n      saveOrUpdateInventoryRecord(name,warehouseIds,editId) {\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!saveOrUpdateInventoryRecord.action',\n          data:{\n            \"name\":name,\n            \"warehouseIds\":warehouseIds,\n            \"id\":editId,\n          }\n        })\n          .then((response) => {\n            this.saveLoading=false;\n            this.addCheckModal=false;\n            this.getInventoryRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.orderNO);\n          })\n          .catch((error) => {\n            this.saveLoading=false;\n            this.addCheckModal=false;\n            this.postErrorTip('请求失败');\n            console.log(error);\n          });\n      },\n      //保存验证\n      handleSubmit(name) {\n        this.$refs[name].validate((valid) => {\n          if (valid) {\n            this.saveLoading=true;\n            this.saveOrUpdateInventoryRecord(this.checkForm.name,this.checkForm.warehouse.join(','),this.editId);\n          }\n        })\n      },\n      //获取修改时的详情\n      getEditInfo(id) {\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!getEditInfo.action',\n          data:{\n            id:id\n          },\n        })\n        .then((response) => {\n          let aData = response.data;\n          this.storeRoomName = aData.storeRoomName;\n        })\n        .catch((error) => {\n          this.postErrorTip('请求失败');\n          console.log(error);\n        });\n      },\n\n      //删除\n      showDelModal(id){\n        this.delModal = true;\n        this.delId = id;\n      },\n      handleDelSubmit() {\n        this.saveLoading=true;\n        this.delModal = false;\n        this.deleteInventoryRecord(this.delId,this.deleteForm.reason);\n      },\n      deleteInventoryRecord(id,deleteCause){\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!deleteInventoryRecord.action',\n          data:{\n            id:id,\n            deleteCause:deleteCause\n          },\n        })\n        .then((response) => {\n          this.saveLoading = false;\n          this.getInventoryRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.orderNO);\n        })\n        .catch((error) => {\n          this.postErrorTip('请求失败');\n          console.log(error);\n        });\n      },\n\n      //盘点\n      toCheckOrder(id){\n        this.$router.push({path:`/checkOrder/${id}`});\n      },\n\n      //列表\n      getInventoryRecordPage(pageNum,pageSize,startDate,endDate,num) {\n        this.data = [];\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!getInventoryRecordPage.action',\n          data:{\n            pageNum:pageNum,\n            pageSize:pageSize,\n            startDate:startDate,\n            endDate:endDate,\n            num:num,\n          },\n        })\n          .then((response) => {\n            let aData = response.data;\n            if(aData && aData.list.length>0){\n              aData.list.map((item)=>{\n                this.data.push({\n                  id:item.id,\n                  name:item.name,\n                  orderNO:item.num,\n                  warehouseNum:item.storeroomInfo,\n                  checkNumber:item.storeroomGoodsInfo,\n                  lossNumber:item.storeroomGoodsInfoDetail,\n                  orderPerson:item.userName,\n                  orderDate:item.date\n                })\n              })\n            }\n            this.total = aData.totalCount;\n            this.selectLoading = false;\n          })\n          .catch((error) => {\n            this.selectLoading = false;\n            this.postErrorTip('请求失败');\n            console.log(error);\n          });\n      },\n\n      //分页\n      changePage(num) {\n        this.pageNum = num;\n        this.getInventoryRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.orderNO);\n      },\n      changePageSize(num) {\n        this.pageSize = num;\n        this.getInventoryRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.orderNO);\n      },\n\n      //查询\n      selectHandle(){\n        this.selectLoading = true;\n        this.getInventoryRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.orderNO);\n      },\n    },\n    mounted() {\n\n    }\n  }\n</script>\n<style lang=\"less\" scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/consumablesManage/views/consumablesManage/check.vue","function injectStyle (context) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bc0ea44e\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=styles&index=0!./check.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./check.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./check.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bc0ea44e\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=template&index=0!./check.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-bc0ea44e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/consumablesManage/views/consumablesManage/check.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"zd-common-component\"},[_c('div',{staticClass:\"zd-common-clearFix\"},[_c('Button',{staticClass:\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10\",attrs:{\"type\":\"primary\",\"custom-icon\":\"zd-common-icon-add\"},on:{\"click\":function($event){return _vm.showAddCheck('add','','')}}},[_vm._v(\"\\n      盘点单\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-fr\"},[_c('DatePicker',{staticClass:\"zd-common-input-h38 zd-common-fl zd-common-mr10 zd-cm-w220\",attrs:{\"editable\":false,\"type\":\"daterange\",\"options\":_vm.dateOptions,\"placeholder\":\"日期\"},on:{\"on-change\":_vm.changeDate}}),_vm._v(\" \"),_c('Input',{staticClass:\"zd-common-input-h38 zd-common-w150 zd-common-fl zd-common-mr10\",attrs:{\"maxlength\":50,\"placeholder\":\"盘点单号\"},model:{value:(_vm.orderNO),callback:function ($$v) {_vm.orderNO=$$v},expression:\"orderNO\"}}),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-fl\",attrs:{\"type\":\"primary\",\"loading\":_vm.selectLoading},on:{\"click\":_vm.selectHandle}},[(!_vm.selectLoading)?_c('span',[_vm._v(\"查询\")]):_c('span',[_vm._v(\"正在查询...\")])])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-mt16\"},[_c('Table',{ref:\"currentRowTable\",staticClass:\"checkTable\",attrs:{\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.data}}),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-tc zd-common-mt20\"},[_c('Page',{attrs:{\"total\":_vm.total,\"current\":_vm.pageNum,\"page-size\":_vm.pageSize,\"show-sizer\":\"\",\"show-elevator\":\"\",\"show-total\":\"\"},on:{\"on-change\":_vm.changePage,\"on-page-size-change\":_vm.changePageSize}})],1)],1),_vm._v(\" \"),_c('Modal',{attrs:{\"mask-closable\":false},model:{value:(_vm.addCheckModal),callback:function ($$v) {_vm.addCheckModal=$$v},expression:\"addCheckModal\"}},[_c('h3',{staticClass:\"zd-common-modal-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(_vm._s(_vm.modalTitle))])]),_vm._v(\" \"),_c('Form',{ref:\"checkForm\",attrs:{\"model\":_vm.checkForm,\"rules\":_vm.ruleValidate,\"label-width\":100}},[_c('FormItem',{attrs:{\"label\":\"名称：\",\"prop\":\"name\"}},[_c('Input',{staticClass:\"zd-common-w300\",attrs:{\"placeholder\":\"请输入盘点名称\",\"maxlength\":30},model:{value:(_vm.checkForm.name),callback:function ($$v) {_vm.$set(_vm.checkForm, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"checkForm.name\"}})],1),_vm._v(\" \"),(_vm.editId === '')?_c('FormItem',{attrs:{\"label\":\"盘点仓库：\",\"prop\":\"warehouse\"}},[_c('Select',{staticClass:\"zd-common-w300\",attrs:{\"multiple\":\"\",\"placeholder\":\"请选择盘点仓库\"},model:{value:(_vm.checkForm.warehouse),callback:function ($$v) {_vm.$set(_vm.checkForm, \"warehouse\", $$v)},expression:\"checkForm.warehouse\"}},_vm._l((_vm.warehouseArr),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1):_c('p',{staticClass:\"zd-common-mt24 zd-common-mb24\"},[_c('span',{staticClass:\"zd-common-w100 zd-common-dib zd-common-tr zd-common-pr12\"},[_vm._v(\"盘点仓库：\")]),_vm._v(_vm._s(_vm.storeRoomName))]),_vm._v(\" \"),_c('p',{staticClass:\"zd-common-mt24 zd-common-mb24\"},[_c('span',{staticClass:\"zd-common-w100 zd-common-dib zd-common-tr zd-common-pr12\"},[_vm._v(\"制单人：\")]),_vm._v(_vm._s(_vm.userName))]),_vm._v(\" \"),_c('p',{staticClass:\"zd-common-mt24 zd-common-mb24\"},[_c('span',{staticClass:\"zd-common-w100 zd-common-dib zd-common-tr zd-common-pr12\"},[_vm._v(\"制单日期：\")]),_vm._v(_vm._s(_vm.date))])],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-modal-footer zd-common-pt10\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{staticClass:\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\",attrs:{\"type\":\"primary\",\"loading\":_vm.saveLoading},on:{\"click\":function($event){return _vm.handleSubmit('checkForm')}}},[(!_vm.saveLoading)?_c('span',[_vm._v(\"确定\")]):_c('span',[_vm._v(\"正在保存...\")])]),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-w100 zd-common-h32 zd-common-lh8\",on:{\"click\":function($event){_vm.addCheckModal = false}}},[_vm._v(\"取消\")])],1)],1),_vm._v(\" \"),_c('Modal',{attrs:{\"mask-closable\":false,\"width\":590},model:{value:(_vm.delModal),callback:function ($$v) {_vm.delModal=$$v},expression:\"delModal\"}},[_c('h3',{staticClass:\"zd-common-modal-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"删除入库单\")])]),_vm._v(\" \"),_c('Alert',{staticClass:\"zd-common-warning-c\",attrs:{\"type\":\"warning\",\"show-icon\":\"\"}},[_vm._v(\"是否确认删除？\")]),_vm._v(\" \"),_c('Form',{ref:\"deleteForm\",attrs:{\"model\":_vm.deleteForm}},[_c('FormItem',{staticClass:\"zd-common-mb0\",attrs:{\"label\":\"删除原因：\"}},[_c('Input',{staticClass:\"zd-common-fl\",attrs:{\"placeholder\":\"\",\"maxlength\":100,\"type\":\"textarea\",\"autosize\":{minRows: 3,maxRows: 3}},model:{value:(_vm.deleteForm.reason),callback:function ($$v) {_vm.$set(_vm.deleteForm, \"reason\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"deleteForm.reason\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-modal-footer zd-common-pt10\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{staticClass:\"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8\",attrs:{\"type\":\"primary\",\"loading\":_vm.saveLoading},on:{\"click\":_vm.handleDelSubmit}},[(!_vm.saveLoading)?_c('span',[_vm._v(\"确定\")]):_c('span',[_vm._v(\"正在保存...\")])]),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-w100 zd-common-h32 zd-common-lh8\",on:{\"click\":function($event){_vm.delModal = false}}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-bc0ea44e\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.4@vue-loader/lib/selector.js?type=template&index=0!./src/consumablesManage/views/consumablesManage/check.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}