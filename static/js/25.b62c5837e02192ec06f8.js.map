{"version":3,"sources":["webpack:///src/consumablesManage/views/consumablesManage/checkOrder.vue","webpack:///./src/consumablesManage/views/consumablesManage/checkOrder.vue","webpack:///./src/consumablesManage/views/consumablesManage/checkOrder.vue?1962"],"names":["checkOrder","data","columns","type","align","title","width","key","slot","render","h","params","row","status","style","color","lossNum","checkOrderForm","attrData","pageSize","pageNum","total","warehouse","warehouseArr","goodsName","selectLoading","warehouseName","warehouseNameTmp","saveTime","totalNum","finishNum","notFinishNum","saveLoading","isFinish","created","this","getWarehouseInfoByRecordId","$route","id","methods","lossesHandle","$router","push","path","surplusHandle","_this","BaseAxios","method","url","then","response","aData","name","getInventoryGoodsInfo","split","join","catch","error","postErrorTip","console","log","changeWarehouse","obj","label","goodsInfoName","_this2","statuses","dateTime","goodsInfoTotalNum","list","map","item","code","classify","goodsKindName","brand","model","size","unit","currentInventory","inventory","actualInventory","inventoryNum","statusName","saveInventoryGoodsInfo","outGoodsArr","_this3","i","$Spin","hide","saveHandle","_this4","$refs","validate","valid","show","class","props","changePage","num","changePageSize","selectHandle","exportHandle","location","href","serverPath","mounted","__vue_styles__","context","__webpack_require__","Component","Object","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","_e","attrs","loading","on","click","$event","_v","placeholder","label-in-value","on-change","value","callback","$$v","expression","_l","_s","multiple","max-tag-count","ref","border","scopedSlots","_u","fn","index","prop","max","min","precision","$set","__webpack_exports__"],"mappings":"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","file":"static/js/25.b62c5837e02192ec06f8.js","sourcesContent":["<template>\n  <div class=\"zd-common-component\">\n    <div class=\"zd-common-clearFix\">\n      <Button v-if=\"!isFinish\" type=\"primary\" class=\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10 zd-cm-res-fl\" @click=\"saveHandle('0')\" :loading=\"saveLoading\">\n        <span v-if=\"!selectLoading\"><Icon type=\"ios-film-outline\" class=\"zd-common-fs18 zd-common-mr5 zd-common-fl\"/>保存</span>\n        <span v-else><Icon type=\"ios-film-outline\" class=\"zd-common-fs18 zd-common-mr5 zd-common-fl\"/>保存中...</span>\n      </Button>\n      <Button type=\"primary\" class=\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10 zd-cm-res-fl\" @click=\"saveHandle('1')\">\n        <Icon type=\"ios-checkmark-circle-outline\" class=\"zd-common-fs18 zd-common-mr5 zd-common-fl\"/>盘点完成\n      </Button>\n      <Button type=\"primary\" class=\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10 zd-cm-res-fl\" @click=\"exportHandle\">\n        <Icon type=\"ios-open-outline\" class=\"zd-common-fs18 zd-common-mr5 zd-common-fl\"/>导出\n      </Button>\n      <Button type=\"primary\" class=\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10 zd-cm-res-fl\" @click=\"lossesHandle\">\n        <Icon type=\"ios-trending-down\" class=\"zd-common-fs18 zd-common-mr5 zd-common-fl\"/>盘亏\n      </Button>\n      <Button type=\"primary\" class=\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10 zd-cm-res-fl\" @click=\"surplusHandle\">\n        <Icon type=\"ios-trending-up\" class=\"zd-common-fs18 zd-common-mr5 zd-common-fl\"/>盘盈\n      </Button>\n      <div class=\"zd-common-fr zd-cm-res-fr\">\n        <Select v-model=\"warehouse\" placeholder=\"全部仓库\" @on-change=\"changeWarehouse\" :label-in-value=\"true\" class=\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\">\n          <Option v-for=\"item in warehouseArr\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n        </Select>\n        <Select v-model=\"status\" multiple placeholder=\"全部状态\" :max-tag-count=\"2\" class=\"zd-common-input-h38 zd-common-w250 zd-common-fl zd-common-mr10\">\n          <Option value=\"0\">正常</Option>\n          <Option value=\"1\">盘盈</Option>\n          <Option value=\"2\">盘亏</Option>\n          <Option value=\"3\">未盘点</Option>\n        </Select>\n        <Input v-model=\"goodsName\" placeholder=\"物品名称\" class=\"zd-common-input-h38 zd-common-w150 zd-common-fl zd-common-mr10\"/>\n        <Button type=\"primary\" class=\"zd-common-fl\" @click=\"selectHandle\" :loading=\"selectLoading\">\n          <span v-if=\"!selectLoading\">查询</span>\n          <span v-else>正在查询...</span>\n        </Button>\n      </div>\n    </div>\n    <div class=\"zd-common-mt16\">\n      <div class=\"zd-common-mt16 zd-cm-tip-b\">当前选中{{ warehouseName }}，物品总量：<span class=\"zd-common-primary-c\">{{totalNum}}</span>，已盘点物品：<span class=\"zd-common-primary-c\">{{finishNum}}</span>，未盘点物品：<span class=\"zd-common-primary-c\">{{notFinishNum}}</span><span class=\"zd-common-fr\">{{ isFinish ? \"盘点完成时间\" : \"保存时间\" }}：{{saveTime}} </span></div>\n      <Form ref=\"checkOrderForm\" :model=\"checkOrderForm\" class=\"zd-common-mt5\">\n        <Table ref=\"currentRowTable\" border :columns=\"columns\" :data=\"checkOrderForm.attrData\">\n          <template slot-scope=\"{ row,index }\" slot=\"actualInventory\">\n            <Form-item v-if=\"row.status === '3'\" class=\"zd-common-mt24\" :prop=\"'attrData.' + index + '.actualInventory'\">\n              <InputNumber :max=\"100\" :min=\"1\" :precision='0' placeholder=\"实际库存\" v-model=\"checkOrderForm.attrData[index].actualInventory\"/>\n            </Form-item>\n            <Form-item v-else class=\"zd-common-mt24\">\n             <span>{{ row.actualInventory }}</span>\n            </Form-item>\n          </template>\n        </Table>\n      </Form>\n      <!--<div class=\"zd-common-tc zd-common-mt20\">\n        <Page :total=\"total\" :current=\"pageNum\" :page-size=\"pageSize\" @on-change=\"changePage\" @on-page-size-change=\"changePageSize\" show-sizer show-elevator show-total></Page>\n      </div>-->\n    </div>\n  </div>\n</template>\n<script>\n  export default {\n    data(){\n      return {\n        //列表\n        columns: [\n          {\n            type: 'index',\n            align: 'center',\n            title: '序号',\n            width:65\n          },\n          {\n            title: '物品名称',\n            align: 'center',\n            key: 'name'\n          },\n          {\n            title: '物品编码',\n            align: 'center',\n            key: 'code'\n          },\n          {\n            title: '物品分类',\n            align: 'center',\n            key: 'classify',\n          },\n          {\n            title: '品牌',\n            align: 'center',\n            key: 'brand',\n          },\n          {\n            title: '规格/型号',\n            align: 'center',\n            key: 'model',\n          },\n          {\n            title: '单位',\n            align: 'center',\n            key: 'unit',\n          },\n          {\n            title: '所属仓库',\n            align: 'center',\n            key: 'warehouse',\n          },\n          {\n            title: '当前库存',\n            align: 'center',\n            key: 'currentInventory',\n          },\n          {\n            title: '实际库存',\n            align: 'center',\n            key: 'actualInventory',\n            slot: 'actualInventory',\n          },\n          {\n            title: '盘亏数量',\n            align: 'center',\n            key: 'lossNum',\n            render: (h, params) => {\n              if(params.row.status === '1'){\n                return h('div', [\n                  h('span', {\n                    style: {\n                      color:'red'\n                    },\n                  }, params.row.lossNum)\n                ]);\n              }else if(params.row.status === '2'){\n                return h('div', [\n                  h('span', {\n                    style: {\n                      color:'green'\n                    },\n                  }, params.row.lossNum)\n                ]);\n              }else{\n                return h('div', [\n                  h('span', {\n\n                  }, params.row.lossNum)\n                ]);\n              }\n            }\n          },\n          {\n            title: '状态',\n            align: 'center',\n            key: 'statusName'\n          }\n        ],\n        checkOrderForm:{\n          attrData:[]\n        },\n        pageSize:10,\n        pageNum:1,\n        total:0,\n        //查询\n        warehouse:'',\n        warehouseArr:[],\n        status:[],\n        goodsName:'',\n        selectLoading:false,\n        //tips\n        warehouseName:'',\n        warehouseNameTmp:'',\n        saveTime:'',\n        totalNum:'',\n        finishNum:'',\n        notFinishNum:'',\n        //保存\n        saveLoading:false,\n        isFinish:false\n      }\n    },\n    created(){\n      this.getWarehouseInfoByRecordId(this.$route.params.id);\n    },\n    methods: {\n      //盘亏\n      lossesHandle(){\n        this.$router.push({path: `/createOutOrderByCheck/${this.warehouse}`});\n      },\n      //盘盈\n      surplusHandle(){\n        this.$router.push({path: `/createPutInOrderByCheck/${this.warehouse}`});\n      },\n      //根据盘点单获取仓库\n      getWarehouseInfoByRecordId(id) {\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!getWarehouseInfoByRecordId.action',\n          data:{\n            id:id\n          },\n        })\n        .then((response) => {\n          const aData = response.data;\n          this.warehouseArr = aData;\n          this.warehouse = aData[0].id;\n          this.warehouseName = aData[0].name;\n          this.getInventoryGoodsInfo(this.warehouse.split('_')[0],this.status.join(','),this.goodsName);\n        })\n        .catch((error) => {\n          this.postErrorTip('请求失败');\n          console.log(error);\n        });\n      },\n      changeWarehouse(obj){\n        this.warehouseNameTmp = obj.label;\n      },\n\n      //获取盘点单详情\n      getInventoryGoodsInfo(id,status,goodsInfoName) {\n        this.checkOrderForm.attrData = [];\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!getInventoryGoodsInfo.action',\n          data:{\n            id:id,\n            statuses:status,\n            goodsInfoName:goodsInfoName\n          },\n        })\n        .then((response) => {\n          const aData = response.data;\n          this.saveTime = aData.dateTime;\n          this.totalNum = aData.goodsInfoTotalNum;\n          this.finishNum = aData.finishNum;\n          this.notFinishNum = aData.notFinishNum;\n          this.isFinish = this.totalNum === this.finishNum;\n          aData.list.map((item)=>{\n            this.checkOrderForm.attrData.push({\n              id:item.id,\n              name:item.name,\n              code:item.code,\n              classify:item.goodsKindName,\n              brand:item.brand,\n              model:item.size,\n              unit:item.unit,\n              warehouse:item.warehouseName,\n              currentInventory:item.inventory,\n              actualInventory:item.actualInventory?item.actualInventory:null,\n              lossNum:item.inventoryNum,\n              statusName:item.statusName,\n              status:item.status\n            })\n          });\n          this.selectLoading = false;\n        })\n        .catch((error) => {\n          this.selectLoading = false;\n          this.postErrorTip('请求失败');\n          console.log(error);\n        });\n      },\n\n      //保存盘点单\n      saveInventoryGoodsInfo(id,outGoodsArr,status) {\n        const params = {};\n        params['id'] = id;\n        params['status'] = status; //0---保存 1---盘点完成提交\n\n        outGoodsArr.map((item,i)=>{\n            params['outGoodsVOs['+i+'].count'] = (status === '1' ? item.currentInventory : (item.actualInventory === null ? \"\" : item.actualInventory));\n            params['outGoodsVOs['+i+'].recordGoodsId'] = item.id;\n        });\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!saveInventoryGoodsInfo.action',\n          data:params\n        })\n          .then((response) => {\n            this.$Spin.hide();\n            this.saveLoading = false;\n            this.getInventoryGoodsInfo(this.warehouse.split('_')[0],this.status.join(','),this.goodsName);\n          })\n          .catch((error) => {\n            this.postErrorTip('请求失败');\n            console.log(error);\n          });\n      },\n      saveHandle(status){\n        this.$refs['checkOrderForm'].validate((valid) => {\n          if (valid) {\n            if(status === '1'){\n              this.$Spin.show({\n                render: (h) => {\n                  return h('div', [\n                    h('Icon', {\n                      'class': 'demo-spin-icon-load',\n                      props: {\n                        type: 'ios-loading',\n                        size: 18\n                      }\n                    }),\n                    h('div', '正在保存...')\n                  ])\n                }\n              });\n            }else{\n              this.saveLoading=true;\n            }\n            this.saveInventoryGoodsInfo(this.warehouse.split('_')[0],this.checkOrderForm.attrData,status)\n          }\n        })\n      },\n\n      //分页\n      changePage(num) {\n        this.pageNum = num;\n      },\n      changePageSize(num) {\n        this.pageSize = num;\n      },\n\n      //查询\n      selectHandle(){\n        this.warehouseName = this.warehouseNameTmp;\n        this.selectLoading = true;\n        this.getInventoryGoodsInfo(this.warehouse.split('_')[0],this.status.join(','),this.goodsName);\n      },\n\n      //导出\n      exportHandle(){\n        location.href = this.serverPath+\"/sr/storeroomData!exportInventoryGoodsInfo.action?id=\"+this.warehouse.split('_')[0]+\"&statuses=\"+this.status.join(',')+\"&goodsInfoName=\"+this.goodsName;\n      },\n\n    },\n    mounted(){}\n  }\n</script>\n<style lang=\"less\" scoped>\n  .ivu-table .demo-table-info-row td{\n    background-color: rgba(28, 144, 243, 0.1);\n  }\n  /*适配*/\n  @media screen and (max-width: 1281px){\n    .zd-cm-res-fr{\n      float: left !important;\n    }\n    .zd-cm-res-fr > *,.zd-cm-res-fl{\n      margin-bottom:10px;\n    }\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/consumablesManage/views/consumablesManage/checkOrder.vue","function injectStyle (context) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-55aa158a\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=styles&index=0!./checkOrder.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./checkOrder.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./checkOrder.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-55aa158a\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=template&index=0!./checkOrder.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-55aa158a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/consumablesManage/views/consumablesManage/checkOrder.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"zd-common-component\"},[_c('div',{staticClass:\"zd-common-clearFix\"},[(!_vm.isFinish)?_c('Button',{staticClass:\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10 zd-cm-res-fl\",attrs:{\"type\":\"primary\",\"loading\":_vm.saveLoading},on:{\"click\":function($event){return _vm.saveHandle('0')}}},[(!_vm.selectLoading)?_c('span',[_c('Icon',{staticClass:\"zd-common-fs18 zd-common-mr5 zd-common-fl\",attrs:{\"type\":\"ios-film-outline\"}}),_vm._v(\"保存\")],1):_c('span',[_c('Icon',{staticClass:\"zd-common-fs18 zd-common-mr5 zd-common-fl\",attrs:{\"type\":\"ios-film-outline\"}}),_vm._v(\"保存中...\")],1)]):_vm._e(),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10 zd-cm-res-fl\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.saveHandle('1')}}},[_c('Icon',{staticClass:\"zd-common-fs18 zd-common-mr5 zd-common-fl\",attrs:{\"type\":\"ios-checkmark-circle-outline\"}}),_vm._v(\"盘点完成\\n    \")],1),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10 zd-cm-res-fl\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.exportHandle}},[_c('Icon',{staticClass:\"zd-common-fs18 zd-common-mr5 zd-common-fl\",attrs:{\"type\":\"ios-open-outline\"}}),_vm._v(\"导出\\n    \")],1),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10 zd-cm-res-fl\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.lossesHandle}},[_c('Icon',{staticClass:\"zd-common-fs18 zd-common-mr5 zd-common-fl\",attrs:{\"type\":\"ios-trending-down\"}}),_vm._v(\"盘亏\\n    \")],1),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10 zd-cm-res-fl\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.surplusHandle}},[_c('Icon',{staticClass:\"zd-common-fs18 zd-common-mr5 zd-common-fl\",attrs:{\"type\":\"ios-trending-up\"}}),_vm._v(\"盘盈\\n    \")],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-fr zd-cm-res-fr\"},[_c('Select',{staticClass:\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\",attrs:{\"placeholder\":\"全部仓库\",\"label-in-value\":true},on:{\"on-change\":_vm.changeWarehouse},model:{value:(_vm.warehouse),callback:function ($$v) {_vm.warehouse=$$v},expression:\"warehouse\"}},_vm._l((_vm.warehouseArr),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1),_vm._v(\" \"),_c('Select',{staticClass:\"zd-common-input-h38 zd-common-w250 zd-common-fl zd-common-mr10\",attrs:{\"multiple\":\"\",\"placeholder\":\"全部状态\",\"max-tag-count\":2},model:{value:(_vm.status),callback:function ($$v) {_vm.status=$$v},expression:\"status\"}},[_c('Option',{attrs:{\"value\":\"0\"}},[_vm._v(\"正常\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"1\"}},[_vm._v(\"盘盈\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"2\"}},[_vm._v(\"盘亏\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"3\"}},[_vm._v(\"未盘点\")])],1),_vm._v(\" \"),_c('Input',{staticClass:\"zd-common-input-h38 zd-common-w150 zd-common-fl zd-common-mr10\",attrs:{\"placeholder\":\"物品名称\"},model:{value:(_vm.goodsName),callback:function ($$v) {_vm.goodsName=$$v},expression:\"goodsName\"}}),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-fl\",attrs:{\"type\":\"primary\",\"loading\":_vm.selectLoading},on:{\"click\":_vm.selectHandle}},[(!_vm.selectLoading)?_c('span',[_vm._v(\"查询\")]):_c('span',[_vm._v(\"正在查询...\")])])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-mt16\"},[_c('div',{staticClass:\"zd-common-mt16 zd-cm-tip-b\"},[_vm._v(\"当前选中\"+_vm._s(_vm.warehouseName)+\"，物品总量：\"),_c('span',{staticClass:\"zd-common-primary-c\"},[_vm._v(_vm._s(_vm.totalNum))]),_vm._v(\"，已盘点物品：\"),_c('span',{staticClass:\"zd-common-primary-c\"},[_vm._v(_vm._s(_vm.finishNum))]),_vm._v(\"，未盘点物品：\"),_c('span',{staticClass:\"zd-common-primary-c\"},[_vm._v(_vm._s(_vm.notFinishNum))]),_c('span',{staticClass:\"zd-common-fr\"},[_vm._v(_vm._s(_vm.isFinish ? \"盘点完成时间\" : \"保存时间\")+\"：\"+_vm._s(_vm.saveTime)+\" \")])]),_vm._v(\" \"),_c('Form',{ref:\"checkOrderForm\",staticClass:\"zd-common-mt5\",attrs:{\"model\":_vm.checkOrderForm}},[_c('Table',{ref:\"currentRowTable\",attrs:{\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.checkOrderForm.attrData},scopedSlots:_vm._u([{key:\"actualInventory\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [(row.status === '3')?_c('Form-item',{staticClass:\"zd-common-mt24\",attrs:{\"prop\":'attrData.' + index + '.actualInventory'}},[_c('InputNumber',{attrs:{\"max\":100,\"min\":1,\"precision\":0,\"placeholder\":\"实际库存\"},model:{value:(_vm.checkOrderForm.attrData[index].actualInventory),callback:function ($$v) {_vm.$set(_vm.checkOrderForm.attrData[index], \"actualInventory\", $$v)},expression:\"checkOrderForm.attrData[index].actualInventory\"}})],1):_c('Form-item',{staticClass:\"zd-common-mt24\"},[_c('span',[_vm._v(_vm._s(row.actualInventory))])])]}}])})],1)],1)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-55aa158a\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.4@vue-loader/lib/selector.js?type=template&index=0!./src/consumablesManage/views/consumablesManage/checkOrder.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}