webpackJsonp([22],{msLD:function(e,t){},xBwV:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("Q+Ik"),n=o.n(a),i={data:function(){var e=this;return{columns:[{type:"index",align:"center",title:"序号",width:65},{title:"单据类型",align:"center",key:"orderType"},{title:"单号",align:"center",key:"orderNO",width:140},{title:"操作人",align:"center",key:"actionPerson"},{title:"操作日期",align:"center",key:"actionDate"},{title:"原因",align:"center",key:"reason"},{title:"操作",align:"center",key:"action",width:180,render:function(t,o){return t("div",[t("Button",{props:{type:"primary",ghost:!0},style:{height:"28px",padding:"0 15px 1px"},on:{click:function(){e.showRecoveryModal(o.row.id)}}},"恢复")])}}],data:[],pageSize:10,pageNum:1,total:0,rId:"",recoveryModal:!1,dateOptions:this.dateRange,startDate:"",endDate:"",typeArr:[],type:"",orderNO:"",selectLoading:!1,saveLoading:!1}},created:function(){this.getRecoveryKind(),this.getRecoveryRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.type,this.orderNO)},methods:{changeDate:function(e){this.startDate=e[0],this.endDate=e[1]},getRecoveryKind:function(){var e=this;BaseAxios({method:"post",url:"/sr/storeroomData!getRecoveryKind.action",data:{}}).then(function(t){var o=t.data;e.typeArr=n()(o)}).catch(function(t){e.postErrorTip("请求失败"),console.log(t)})},showRecoveryModal:function(e){this.rId=e,this.recoveryModal=!0},confirmRecovery:function(){this.saveLoading=!0,this.recoveryRecord(this.rId)},recoveryRecord:function(e){var t=this;BaseAxios({method:"post",url:"/sr/storeroomData!recoveryRecord.action",data:{id:e}}).then(function(e){var o=e.data;""!==o?t.postWarningTip(o):t.postSuccessTip("恢复成功"),t.saveLoading=!1,t.recoveryModal=!1,t.getRecoveryRecordPage(t.pageNum,t.pageSize,t.startDate,t.endDate,t.type,t.orderNO)}).catch(function(e){t.saveLoading=!1,t.recoveryModal=!1,t.postErrorTip("请求失败"),console.log(e)})},getRecoveryRecordPage:function(e,t,o,a,n,i){var r=this;this.data=[],BaseAxios({method:"post",url:"/sr/storeroomData!getRecoveryRecordPage.action",data:{pageNum:e,pageSize:t,startDate:o,endDate:a,kind:n,num:i}}).then(function(e){var t=e.data;t&&t.list.length>0&&t.list.map(function(e){r.data.push({id:e.id,orderType:e.kind,orderNO:e.num,actionPerson:e.userName,actionDate:e.date,reason:e.cause})}),r.total=t.totalCount,r.selectLoading=!1}).catch(function(e){r.selectLoading=!1,r.postErrorTip("请求失败"),console.log(e)})},changePage:function(e){this.pageNum=e,this.getRecoveryRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.type,this.orderNO)},changePageSize:function(e){this.pageSize=e,this.getRecoveryRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.type,this.orderNO)},selectHandle:function(){this.selectLoading=!0,this.getRecoveryRecordPage(this.pageNum,this.pageSize,this.startDate,this.endDate,this.type,this.orderNO)}},mounted:function(){}},r=o("W5g0");var s=function(e){o("msLD")},c=Object(r.a)(i,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"zd-common-component"},[o("div",{staticClass:"zd-common-clearFix"},[o("div",{staticClass:"zd-common-fr"},[o("DatePicker",{staticClass:"zd-common-input-h38 zd-common-fl zd-common-mr10 zd-cm-w220",attrs:{editable:!1,type:"daterange",options:e.dateOptions,placeholder:"日期"},on:{"on-change":e.changeDate}}),e._v(" "),o("Select",{staticClass:"zd-common-input-h38 zd-common-w150 zd-common-fl zd-common-mr10",attrs:{placeholder:"全部单据类型",clearable:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeArr,function(t){return o("Option",{key:t[0],attrs:{value:t[0]}},[e._v(e._s(t[1]))])}),1),e._v(" "),o("Input",{staticClass:"zd-common-input-h38 zd-common-w150 zd-common-fl zd-common-mr10",attrs:{placeholder:"单号",maxlength:50},model:{value:e.orderNO,callback:function(t){e.orderNO=t},expression:"orderNO"}}),e._v(" "),o("Button",{staticClass:"zd-common-fl",attrs:{type:"primary",loading:e.selectLoading},on:{click:e.selectHandle}},[e.selectLoading?o("span",[e._v("正在查询...")]):o("span",[e._v("查询")])])],1)]),e._v(" "),o("div",{staticClass:"zd-common-mt16"},[o("Table",{ref:"currentRowTable",attrs:{border:"",columns:e.columns,data:e.data}}),e._v(" "),o("div",{staticClass:"zd-common-tc zd-common-mt20"},[o("Page",{attrs:{total:e.total,current:e.pageNum,"page-size":e.pageSize,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),e._v(" "),o("Modal",{attrs:{"mask-closable":!1,closable:!1,width:360},model:{value:e.recoveryModal,callback:function(t){e.recoveryModal=t},expression:"recoveryModal"}},[o("h3",{attrs:{slot:"header"},slot:"header"}),e._v(" "),o("div",{staticClass:"zd-common-tc"},[o("div",{staticClass:"zd-common-modal-waring zd-common-auto"}),e._v(" "),o("p",{staticClass:"zd-common-primary-c zd-common-font-size-large zd-common-mt15"},[e._v("是否确认恢复？")])]),e._v(" "),o("div",{staticClass:"zd-common-modal-footer zd-common-pt10",attrs:{slot:"footer"},slot:"footer"},[o("Button",{staticClass:"zd-common-mr35 zd-common-w100 zd-common-h32 zd-common-lh8",attrs:{type:"primary",loading:e.saveLoading},on:{click:e.confirmRecovery}},[e.saveLoading?o("span",[e._v("正在保存...")]):o("span",[e._v("确定")])]),e._v(" "),o("Button",{staticClass:"zd-common-w100 zd-common-h32 zd-common-lh8",on:{click:function(t){e.recoveryModal=!1}}},[e._v("取消")])],1)])],1)},[],!1,s,"data-v-63381246",null);t.default=c.exports}});
//# sourceMappingURL=22.df250652435de9c4e964.js.map