webpackJsonp([28],{EC0U:function(t,e){},gNcQ:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("fYFQ"),a=o.n(n),i=(o("Kmkn"),{components:{Treeselect:a.a},data:function(){var t=this;return{columns:[{type:"index",align:"center",title:"序号",width:65},{title:"物品名称",align:"center",key:"name"},{title:"物品编码",align:"center",key:"code"},{title:"物品类别",align:"center",key:"classify"},{title:"品牌",align:"center",key:"brand"},{title:"规格/型号",align:"center",key:"model"},{title:"单位",align:"center",key:"unit"},{title:"现存量",align:"center",key:"standingStock",render:function(e,o){return e("div",[e("span",{class:"zd-common-primary-c zd-common-cp",on:{click:function(){t.showDetail(o.index)}}},o.row.standingStock)])}},{title:"金额",align:"center",key:"amount"}],data:[],pageSize:10,pageNum:1,total:0,selectLoading:!1,dateOptions:this.dateRange,warehouseArr:[],warehouse:"",type:null,typeIdArr:[],name:"",treeOptions:[],normalizer:function(t){return{id:t.id,label:t.name,children:t.children}},goodsName:"",inventoryModal:!1,detailCol:[{type:"index",align:"center",title:"序号",width:65},{title:"校区",align:"center",key:"name"},{title:"现存量",align:"center",key:"inventory"}],detailData:[],saveLoading:!1}},created:function(){var t=this;this.getChargedStoreRoom().then(function(e){t.warehouseArr=e.data}),this.inventoryStatistics(this.warehouse,this.typeIdArr.join(","),this.name),this.getKind()},methods:{onSelect:function(t,e){this.typeIdArr=t},getKind:function(){var t=this;this.treeOptions=[],this.getGoodsKindTree().then(function(e){t.treeOptions=e.data})},showDetail:function(t){this.inventoryModal=!0,this.detailData=this.data[t].storeDetail,this.goodsName=this.data[t].name},inventoryStatistics:function(t,e,o){var n=this;this.data=[],BaseAxios({method:"post",url:"/sr/storeroomData!inventoryStatistics.action",data:{warehouseIds:t,goodsKindIds:e,goodsName:o}}).then(function(t){var e=t.data;e&&e.length>0&&e.map(function(t){n.data.push({id:t.id,name:t.name,code:t.code,classify:t.goodsKindName,brand:t.brand,model:t.size,unit:t.unit,standingStock:t.inventory,storeDetail:t.storeDetail,amount:t.price})}),n.total=e.totalRecord,n.selectLoading=!1}).catch(function(t){n.selectLoading=!1,n.postErrorTip("请求失败"),console.log(t)})},selectHandle:function(){this.selectLoading=!0,this.inventoryStatistics(this.warehouse,this.typeIdArr.join(","),this.name)},exportHandle:function(){location.href=this.serverPath+"/sr/storeroomData!exportInventoryStatistics.action?warehouseIds="+this.warehouse+"&goodsKindIds="+this.typeIdArr.join(",")+"&goodsName="+this.name}},mounted:function(){}}),s=o("W5g0");var r=function(t){o("EC0U")},l=Object(s.a)(i,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"zd-common-component"},[o("div",{staticClass:"zd-common-clearFix"},[o("Button",{staticClass:"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10",attrs:{type:"primary"},on:{click:t.exportHandle}},[o("Icon",{staticClass:"zd-common-fs18 zd-common-mr5 zd-common-fl",attrs:{type:"ios-open-outline"}}),t._v("导出\n    ")],1),t._v(" "),o("div",{staticClass:"zd-common-fr"},[o("Select",{staticClass:"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10",attrs:{clearable:!0,placeholder:"全部仓库"},model:{value:t.warehouse,callback:function(e){t.warehouse=e},expression:"warehouse"}},t._l(t.warehouseArr,function(e){return o("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1),t._v(" "),o("div",{staticClass:"zd-cm-tree zd-common-w300 zd-common-fl zd-common-mr10"},[o("treeselect",{attrs:{multiple:!0,options:t.treeOptions,normalizer:t.normalizer,limit:2,limitText:t.limitHandle,noOptionsText:"暂无数据",clearable:!1,placeholder:"全部物品分类"},on:{close:t.onSelect},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),t._v(" "),o("Input",{staticClass:"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10",attrs:{maxlength:50,placeholder:"物品名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),o("Button",{staticClass:"zd-common-fl",attrs:{type:"primary",loading:t.selectLoading},on:{click:t.selectHandle}},[t.selectLoading?o("span",[t._v("正在查询...")]):o("span",[t._v("查询")])])],1)],1),t._v(" "),o("div",{staticClass:"zd-common-mt16"},[o("Table",{ref:"currentRowTable",attrs:{border:"",columns:t.columns,data:t.data}})],1),t._v(" "),o("Modal",{attrs:{"mask-closable":!1,width:600},model:{value:t.inventoryModal,callback:function(e){t.inventoryModal=e},expression:"inventoryModal"}},[o("h3",{staticClass:"zd-common-modal-header",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("现存量 - "+t._s(t.goodsName))])]),t._v(" "),o("vue-scroll",[o("div",{staticClass:"zd-common-h350"},[o("Table",{attrs:{border:"",columns:t.detailCol,data:t.detailData}})],1)]),t._v(" "),o("div",{staticClass:"zd-common-modal-footer zd-common-pt10",attrs:{slot:"footer"},slot:"footer"})],1)],1)},[],!1,r,"data-v-3b8c2fb6",null);e.default=l.exports}});
//# sourceMappingURL=28.51d81eefb3a57bdc61b3.js.map