{"version":3,"sources":["webpack:///src/consumablesManage/views/statistics/goodsStatistics.vue","webpack:///./src/consumablesManage/views/statistics/goodsStatistics.vue","webpack:///./src/consumablesManage/views/statistics/goodsStatistics.vue?90f5"],"names":["goodsStatistics","components","Treeselect","vue_treeselect_cjs_default","a","data","_this","this","columns","type","align","title","width","key","children","render","h","params","style","textDecoration","cursor","on","click","showInventoryModal","row","id","inWarehouseNum","outWarehouseNum","selectLoading","date","dateOptions","dateRange","warehouseArr","warehouse","typeIdArr","name","treeOptions","startDate","endDate","normalizer","node","label","inventoryModal","inventoryCols","inventoryData","saveLoading","surplusRecords","pageNum","pageSize","total","goodsInfoName","detailId","detailType","created","_this2","getChargedStoreRoom","then","response","getKind","end","Date","start","setTime","getTime","toLocaleDateString","split","fillZero","join","methods","changeDate","arr","onSelect","value","instanceId","_this3","getGoodsKindTree","res","goodsStatisticsDetail","goodsInfoId","kind","warehouseIds","_this4","BaseAxios","method","url","aData","list","length","map","item","push","orderNO","num","warehouseName","intoKind","number","count","price","unitPrice","amount","purchaser","buyName","orderPerson","userName","orderDate","productDate","totalCount","catch","error","postErrorTip","console","log","viewMore","goodsKindIds","goodsName","_this5","code","classify","goodsKindName","brand","model","size","unit","intoCount","inWarehouseAmount","intoPrice","outCount","outWarehouseAmount","outPrice","totalRecord","selectHandle","exportHandle","location","href","serverPath","mounted","__vue_styles__","context","__webpack_require__","Component","Object","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","editable","options","placeholder","on-change","callback","$$v","expression","clearable","_l","_s","multiple","limit","limitText","limitHandle","noOptionsText","close","maxlength","loading","ref","border","mask-closable","slot","$event","__webpack_exports__"],"mappings":"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","file":"static/js/18.24150e918f35ad6f1250.js","sourcesContent":["<template>\n  <div class=\"zd-common-component\">\n    <div class=\"zd-common-clearFix\">\n      <Button type=\"primary\" class=\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10\" @click=\"exportHandle\">\n        <Icon type=\"ios-open-outline\" class=\"zd-common-fs18 zd-common-mr5 zd-common-fl\"/> 导出\n      </Button>\n      <div class=\"zd-common-fr\">\n        <DatePicker v-model=\"date\" :editable=\"false\" type=\"daterange\" :options=\"dateOptions\" placeholder=\"日期\"\n                    class=\"zd-common-input-h38 zd-common-fl zd-common-mr10 zd-cm-w220\" @on-change=\"changeDate\"></DatePicker>\n        <Select v-model=\"warehouse\" :clearable=\"true\" placeholder=\"全部仓库\" class=\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\">\n          <Option v-for=\"item in warehouseArr\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n        </Select>\n        <div class=\"zd-common-w300 zd-common-fl zd-common-mr10\">\n          <treeselect v-model=\"type\" :multiple=\"true\" :options=\"treeOptions\" :limit=\"2\" :limitText=\"limitHandle\" :normalizer=\"normalizer\" noOptionsText=\"暂无数据\" :clearable=\"false\" placeholder=\"选择物品分类\" @close=\"onSelect\"/>\n        </div>\n        <Input v-model=\"name\" :maxlength=\"50\" placeholder=\"物品名称\" class=\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\"/>\n        <Button type=\"primary\" class=\"zd-common-fl\" @click=\"selectHandle\" :loading=\"selectLoading\">\n          <span v-if=\"!selectLoading\">查询</span>\n          <span v-else>正在查询...</span>\n        </Button>\n      </div>\n    </div>\n    <div class=\"zd-common-mt16\">\n      <Table ref=\"currentRowTable\" border :columns=\"columns\" :data=\"data\"></Table>\n      <!--<div class=\"zd-common-tc zd-common-mt20\">\n        <Page :total=\"total\" :current=\"pageNum\" :page-size=\"pageSize\" @on-change=\"changePage\" @on-page-size-change=\"changePageSize\" show-sizer show-elevator show-total></Page>\n      </div>-->\n    </div>\n    <!--库存-->\n    <Modal v-model=\"inventoryModal\" :mask-closable=\"false\" :width=\"1200\">\n      <h3 slot=\"header\" class=\"zd-common-modal-header\">\n        <span>{{ title }} - {{ goodsInfoName }}</span>\n      </h3>\n      <Table class=\"zd-common-overflow-v\" border :columns=\"inventoryCols\" :data=\"inventoryData\"></Table>\n      <div class=\"zd-common-tc zd-common-mt20\">\n        <span v-if=\"surplusRecords>0\" class=\"zd-common-primary-c zd-common-cp zd-common-border-bottom1 zd-common-pl10 zd-common-pr10 zd-common-pb5\" @click=\"viewMore\">\n          还剩{{ surplusRecords}}条记录，继续查看\n          <Icon type=\"ios-arrow-down\" />\n        </span>\n        <span v-else class=\"zd-common-border-bottom1 zd-common-pl10 zd-common-pr10 zd-common-pb5\">\n          没有更多了\n        </span>\n      </div>\n      <div slot=\"footer\" class=\"zd-common-modal-footer zd-common-pt10\">\n        <Button @click=\"inventoryModal = false\" class=\"zd-common-w100 zd-common-h32 zd-common-lh8\">取消</Button>\n      </div>\n    </Modal>\n  </div>\n</template>\n<script>\n  import Treeselect from '@riophae/vue-treeselect'\n  import '@riophae/vue-treeselect/dist/vue-treeselect.css'\n  export default {\n    components: {\n      Treeselect\n    },\n    data() {\n      return {\n        //列表\n        columns: [\n          {\n            type: 'index',\n            align: 'center',\n            title: '序号',\n            width:65\n          },\n          {\n            title: '物品名称',\n            align: 'center',\n            key: 'name'\n          },\n          {\n            title: '物品编码',\n            align: 'center',\n            key: 'code'\n          },\n          {\n            title: '物品分类',\n            align: 'center',\n            key: 'classify',\n          },\n          {\n            title: '品牌',\n            align: 'center',\n            key: 'brand',\n          },\n          {\n            title: '规格/型号',\n            align: 'center',\n            key: 'model',\n          },\n          {\n            title: '单位',\n            align: 'center',\n            key: 'unit',\n          },\n          {\n            title: '入库',\n            align: 'center',\n            children: [\n              {\n                title: '数量',\n                key: 'inWarehouseNum',\n                align: 'center',\n                render: (h, params) => {\n                  return h('div', [\n                    h('span', {\n                      style: {\n                        textDecoration: 'underline',\n                        cursor:'pointer'\n                      },\n                      on:{\n                        click: () => {\n                          this.showInventoryModal(params.row.id,'1');\n                        }\n                      }\n                    },params.row.inWarehouseNum),\n                  ]);\n                }\n              },\n              {\n                title: '金额',\n                key: 'inWarehouseAmount',\n                align: 'center'\n              }\n            ]\n          },\n          {\n            title: '出库',\n            align: 'center',\n            children: [\n              {\n                title: '数量',\n                key: 'outWarehouseNum',\n                align: 'center',\n                render: (h, params) => {\n                  return h('div', [\n                    h('span', {\n                      style: {\n                        textDecoration: 'underline',\n                        cursor:'pointer'\n                      },\n                      on:{\n                        click: () => {\n                          this.showInventoryModal(params.row.id,'2');\n                        }\n                      }\n                    },params.row.outWarehouseNum),\n                  ]);\n                }\n              },\n              {\n                title: '金额',\n                key: 'outWarehouseAmount',\n                align: 'center'\n              }\n            ]\n          },\n        ],\n        data: [],\n        selectLoading:false,\n        //查询\n        date:[],\n        dateOptions: this.dateRange,\n        warehouseArr:[],\n        warehouse:'',\n        type:null,\n        typeIdArr:[],\n        name:'',\n        treeOptions:[],\n        startDate:'',\n        endDate:'',\n        normalizer(node) {\n          return {\n            id: node.id,\n            label: node.name,\n            children: node.children,\n          }\n        },\n        //库存\n        inventoryModal:false,\n        inventoryCols:[\n          {\n            type: 'index',\n            title:'序号',\n            align: 'center',\n            width:65,\n          },\n          {\n            title: '入库单号',\n            align: 'center',\n            key: 'orderNO',\n            width:140\n          },\n          {\n            title: '入库仓库',\n            align: 'center',\n            key: 'warehouse',\n          },\n          {\n            title: '入库类型',\n            align: 'center',\n            key: 'type',\n          },\n          {\n            title: '入库日期',\n            align: 'center',\n            key: 'date',\n          },\n          {\n            title: '入库数量',\n            align: 'center',\n            key: 'number',\n            width:90\n          },\n          {\n            title: '单价',\n            align: 'center',\n            key: 'price',\n            width:65\n          },\n          {\n            title: '金额',\n            align: 'center',\n            key: 'amount',\n            width:65\n          },\n          {\n            title: '购买人',\n            align: 'center',\n            key: 'purchaser',\n            width:75\n          },\n          {\n            title: '制单人',\n            align: 'center',\n            key: 'orderPerson',\n            width:75\n          },\n          {\n            title: '制单日期',\n            align: 'center',\n            key: 'orderDate',\n          }\n        ],\n        inventoryData:[],\n        saveLoading:false,\n        surplusRecords:0,\n        pageNum:1,\n        pageSize:10,\n        total:'',\n        goodsInfoName:'',\n        title:'',\n        detailId:'',\n        detailType:''\n      }\n    },\n    created(){\n      this.getChargedStoreRoom().then((response)=>{\n        this.warehouseArr = response.data;\n      });\n      this.getKind();\n      const end = new Date();\n      const start = new Date();\n      start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n      this.date = [start,end];\n      const endDate = end.toLocaleDateString().split('/');\n      const startDate = start.toLocaleDateString().split('/');\n      this.endDate = endDate[0]+\"-\"+this.fillZero(endDate[1])+\"-\"+this.fillZero(endDate[2]);\n      this.startDate = startDate[0]+\"-\"+this.fillZero(startDate[1])+\"-\"+this.fillZero(startDate[2]);\n      this.goodsStatistics(this.startDate,this.endDate,this.warehouse,this.typeIdArr.join(','),this.name);\n    },\n    methods: {\n\n      //日期\n      changeDate(arr){\n        this.startDate = arr[0];\n        this.endDate = arr[1];\n      },\n      //物品种类\n      onSelect(value,instanceId){\n        this.typeIdArr = value;\n      },\n      //获取分类\n      getKind(){\n        this.treeOptions= [];\n        this.getGoodsKindTree().then((res)=>{\n          this.treeOptions = res.data;\n          // this.recursionFnOne(this.treeOptions,res.data);\n        })\n      },\n      //库存\n      showInventoryModal(id,type){\n        if(type === '1'){\n          this.title = '入库详情';\n        }else{\n          this.title = '出库详情'\n        }\n        this.inventoryData = [];\n        this.pageNum = 1;\n        this.pageSize = 10;\n        this.inventoryModal = true;\n        this.detailId = id;\n        this.detailType = type;\n        this.goodsStatisticsDetail(this.detailId,this.pageNum,this.pageSize,this.detailType,this.startDate,this.endDate,this.warehouse);\n      },\n      //详情\n      goodsStatisticsDetail(goodsInfoId,pageNum,pageSize,kind,startDate,endDate,warehouseIds) {\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!goodsStatisticsDetail.action',\n          data:{\n            goodsInfoId:goodsInfoId,\n            pageNum:pageNum,\n            pageSize:pageSize,\n            startDate:startDate,\n            endDate:endDate,\n            warehouseIds:warehouseIds,\n            kind:kind,//\t1---入库 2---出库\n          },\n        })\n          .then((response) => {\n            let aData = response.data;\n            this.goodsInfoName = aData.goodsInfoName;\n            if(aData && aData.list.length>0){\n              aData.list.map((item)=>{\n                this.inventoryData.push({\n                  orderNO:item.num,\n                  warehouse:item.warehouseName,\n                  type:item.intoKind,\n                  date:item.date,\n                  number:item.count,\n                  price:item.unitPrice,\n                  amount:item.unitPrice * item.count,\n                  purchaser:item.buyName,\n                  orderPerson:item.userName,\n                  orderDate:item.productDate\n                })\n              })\n            }\n            this.surplusRecords = aData.totalCount - this.inventoryData.length;\n          })\n          .catch((error) => {\n            this.postErrorTip('请求失败');\n            console.log(error);\n          });\n      },\n      viewMore(){\n        this.pageNum += 1;\n        this.goodsStatisticsDetail(this.detailId,this.pageNum,this.pageSize,this.detailType,this.startDate,this.endDate,this.warehouse);\n      },\n      //列表\n      goodsStatistics(startDate,endDate,warehouseIds,goodsKindIds,goodsName) {\n        this.data = [];\n        BaseAxios({\n          method: 'post',\n          url: '/sr/storeroomData!goodsStatistics.action',\n          data:{\n            startDate:startDate,\n            endDate:endDate,\n            warehouseIds:warehouseIds,\n            goodsKindIds:goodsKindIds,\n            goodsName:goodsName,\n          },\n        })\n          .then((response) => {\n            let aData = response.data;\n            if(aData && aData.length>0){\n              aData.map((item)=>{\n                this.data.push({\n                  id:item.goodsInfoId,\n                  name:item.name,\n                  code:item.code,\n                  classify:item.goodsKindName,\n                  brand:item.brand,\n                  model:item.size,\n                  unit:item.unit,\n                  inWarehouseNum:item.intoCount,\n                  inWarehouseAmount:item.intoPrice,\n                  outWarehouseNum:item.outCount,\n                  outWarehouseAmount:item.outPrice\n                })\n\n              })\n            }\n            this.total = aData.totalRecord;\n            this.selectLoading = false;\n          })\n          .catch((error) => {\n            this.selectLoading = false;\n            this.postErrorTip('请求失败');\n            console.log(error);\n          });\n      },\n      //查询\n      selectHandle(){\n        this.selectLoading = true;\n        this.goodsStatistics(this.startDate,this.endDate,this.warehouse,this.typeIdArr.join(','),this.name);\n      },\n      //导出\n      exportHandle(){\n        location.href = this.serverPath + \"/sr/storeroomData!exportGoodsStatistics.action?warehouseIds=\"+this.warehouse+\"&goodsKindIds=\"+this.typeIdArr.join(',')+\"&goodsName=\"+this.name+\"&startDate=\"+this.startDate+\"&endDate=\"+this.endDate;\n      }\n    },\n    mounted(){\n\n    }\n  }\n</script>\n<style lang=\"less\" scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/consumablesManage/views/statistics/goodsStatistics.vue","function injectStyle (context) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-96f02658\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=styles&index=0!./goodsStatistics.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./goodsStatistics.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./goodsStatistics.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-96f02658\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=template&index=0!./goodsStatistics.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-96f02658\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/consumablesManage/views/statistics/goodsStatistics.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"zd-common-component\"},[_c('div',{staticClass:\"zd-common-clearFix\"},[_c('Button',{staticClass:\"zd-common-fl zd-common-pl11 zd-common-pr11 zd-common-mr10\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.exportHandle}},[_c('Icon',{staticClass:\"zd-common-fs18 zd-common-mr5 zd-common-fl\",attrs:{\"type\":\"ios-open-outline\"}}),_vm._v(\" 导出\\n    \")],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-fr\"},[_c('DatePicker',{staticClass:\"zd-common-input-h38 zd-common-fl zd-common-mr10 zd-cm-w220\",attrs:{\"editable\":false,\"type\":\"daterange\",\"options\":_vm.dateOptions,\"placeholder\":\"日期\"},on:{\"on-change\":_vm.changeDate},model:{value:(_vm.date),callback:function ($$v) {_vm.date=$$v},expression:\"date\"}}),_vm._v(\" \"),_c('Select',{staticClass:\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\",attrs:{\"clearable\":true,\"placeholder\":\"全部仓库\"},model:{value:(_vm.warehouse),callback:function ($$v) {_vm.warehouse=$$v},expression:\"warehouse\"}},_vm._l((_vm.warehouseArr),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-w300 zd-common-fl zd-common-mr10\"},[_c('treeselect',{attrs:{\"multiple\":true,\"options\":_vm.treeOptions,\"limit\":2,\"limitText\":_vm.limitHandle,\"normalizer\":_vm.normalizer,\"noOptionsText\":\"暂无数据\",\"clearable\":false,\"placeholder\":\"选择物品分类\"},on:{\"close\":_vm.onSelect},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}})],1),_vm._v(\" \"),_c('Input',{staticClass:\"zd-common-input-h38 zd-common-w200 zd-common-fl zd-common-mr10\",attrs:{\"maxlength\":50,\"placeholder\":\"物品名称\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_vm._v(\" \"),_c('Button',{staticClass:\"zd-common-fl\",attrs:{\"type\":\"primary\",\"loading\":_vm.selectLoading},on:{\"click\":_vm.selectHandle}},[(!_vm.selectLoading)?_c('span',[_vm._v(\"查询\")]):_c('span',[_vm._v(\"正在查询...\")])])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-mt16\"},[_c('Table',{ref:\"currentRowTable\",attrs:{\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.data}})],1),_vm._v(\" \"),_c('Modal',{attrs:{\"mask-closable\":false,\"width\":1200},model:{value:(_vm.inventoryModal),callback:function ($$v) {_vm.inventoryModal=$$v},expression:\"inventoryModal\"}},[_c('h3',{staticClass:\"zd-common-modal-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(_vm._s(_vm.title)+\" - \"+_vm._s(_vm.goodsInfoName))])]),_vm._v(\" \"),_c('Table',{staticClass:\"zd-common-overflow-v\",attrs:{\"border\":\"\",\"columns\":_vm.inventoryCols,\"data\":_vm.inventoryData}}),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-tc zd-common-mt20\"},[(_vm.surplusRecords>0)?_c('span',{staticClass:\"zd-common-primary-c zd-common-cp zd-common-border-bottom1 zd-common-pl10 zd-common-pr10 zd-common-pb5\",on:{\"click\":_vm.viewMore}},[_vm._v(\"\\n        还剩\"+_vm._s(_vm.surplusRecords)+\"条记录，继续查看\\n        \"),_c('Icon',{attrs:{\"type\":\"ios-arrow-down\"}})],1):_c('span',{staticClass:\"zd-common-border-bottom1 zd-common-pl10 zd-common-pr10 zd-common-pb5\"},[_vm._v(\"\\n        没有更多了\\n      \")])]),_vm._v(\" \"),_c('div',{staticClass:\"zd-common-modal-footer zd-common-pt10\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{staticClass:\"zd-common-w100 zd-common-h32 zd-common-lh8\",on:{\"click\":function($event){_vm.inventoryModal = false}}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-96f02658\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.4@vue-loader/lib/selector.js?type=template&index=0!./src/consumablesManage/views/statistics/goodsStatistics.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}